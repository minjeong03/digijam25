\doxysection{Loading\+State.\+cpp}
\hypertarget{_loading_state_8cpp_source}{}\label{_loading_state_8cpp_source}\index{Project/JinEngine/Private/LoadingState.cpp@{Project/JinEngine/Private/LoadingState.cpp}}
\mbox{\hyperlink{_loading_state_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_loading_state_8h}{LoadingState.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00002}00002\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_engine_8h}{Engine.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00003}\mbox{\hyperlink{class_loading_state_ac696a3c24805322e0b09a104ceb132e8}{00003}}\ \mbox{\hyperlink{class_loading_state_ac696a3c24805322e0b09a104ceb132e8}{LoadingState::LoadingState}}(std::function<std::unique\_ptr<GameState>()>\ nextFactory\_)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00004}00004\ \ \ \ \ :\ \mbox{\hyperlink{class_loading_state_a40db3522932ae35699d1db2ab5d728b0}{nextFactory}}(\mbox{\hyperlink{namespacestd}{std}}::move(nextFactory\_))}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00005}00005\ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00006}00006\ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00008}\mbox{\hyperlink{class_loading_state_abece8e8c4a6e42ee1540b5130fc2fde7}{00008}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_loading_state_abece8e8c4a6e42ee1540b5130fc2fde7}{LoadingState::Load}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_engine_context}{EngineContext}}\&\ engineContext)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00009}00009\ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00010}00010\ \ \ \ \ \mbox{\hyperlink{class_loading_state_af7bd294a5dfe6f36c4e6291bf64aa219}{loader}}.Start();}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00011}00011\ \ \ \ \ \textcolor{keywordflow}{if}\ (!engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_a125f91cca7722e193b0d60f408f50858}{HasFont}}(\mbox{\hyperlink{class_loading_state_a27df9fbc8edb1b1a7f2ec5d52af2f50f}{uiFontTag}}))}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00012}00012\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00013}00013\ \ \ \ \ \ \ \ \ engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_a0762465f3bfa7573ec3261767a68eb16}{RegisterFont}}(\mbox{\hyperlink{class_loading_state_a27df9fbc8edb1b1a7f2ec5d52af2f50f}{uiFontTag}},\ \textcolor{stringliteral}{"{}Fonts/font1.ttf"{}},\ 32);}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00014}00014\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00015}00015\ \ \ \ \ \mbox{\hyperlink{class_loading_state_aebe9d65f3f4ff289a2d0b76f020e5c1e}{uiReady}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00016}00016\ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00018}\mbox{\hyperlink{class_loading_state_a84ce856d66c4167866a24f49d5c7f471}{00018}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_loading_state_a84ce856d66c4167866a24f49d5c7f471}{LoadingState::Init}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_engine_context}{EngineContext}}\&\ engineContext)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00019}00019\ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00020}00020\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_loading_state_aebe9d65f3f4ff289a2d0b76f020e5c1e}{uiReady}})}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00021}00021\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00022}00022\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ font\ =\ engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_a1db9a464555a13cecb1a865f92eae85c}{GetFontByTag}}(\mbox{\hyperlink{class_loading_state_a27df9fbc8edb1b1a7f2ec5d52af2f50f}{uiFontTag}});}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00023}00023\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (font)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00024}00024\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00025}00025\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ text\ =\ std::make\_unique<TextObject>(font,\ \textcolor{stringliteral}{"{}Loading...\ 0\%"{}});}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00026}00026\ \ \ \ \ \ \ \ \ \ \ \ \ text-\/>SetIgnoreCamera(\textcolor{keyword}{true},\ \mbox{\hyperlink{class_game_state_aca3df3a97dc9c97a03665bc1842ffd78}{GetActiveCamera}}());}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00027}00027\ \ \ \ \ \ \ \ \ \ \ \ \ text-\/>GetTransform2D().SetPosition(\{\ 0.0f,\ -\/50.0f\ \});}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00028}00028\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_loading_state_aecfe4e3c0b70523fe2f15935743340a3}{progressText}}\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_text_object}{TextObject}}*\textcolor{keyword}{>}(\mbox{\hyperlink{class_game_state_abea569338b92e0b499193fdbdab94e86}{GetObjectManager}}().\mbox{\hyperlink{class_object_manager_ae1f29824763903213d6044d463742db4}{AddObject}}(std::move(text),\ \textcolor{stringliteral}{"{}[Loading]ProgressText"{}}));}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00029}00029\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_loading_state_aecfe4e3c0b70523fe2f15935743340a3}{progressText}}-\/>SetAlignH(\mbox{\hyperlink{_font_8h_adba6445b3653352a2f932f18e80c4c44a4f1f6016fc9f3f2353c0cc7c67b292bd}{TextAlignH::Center}});}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00030}00030\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_loading_state_aecfe4e3c0b70523fe2f15935743340a3}{progressText}}-\/>SetAlignV(\mbox{\hyperlink{_font_8h_adddce2e8703c25cb1fda789220605572ab1ca34f82e83c52b010f86955f264e05}{TextAlignV::Middle}});}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00031}00031\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00032}00032\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00033}00033\ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00035}\mbox{\hyperlink{class_loading_state_aaeb0439da526b6933f6b61bde194a64f}{00035}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_loading_state_aaeb0439da526b6933f6b61bde194a64f}{LoadingState::LateInit}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_engine_context}{EngineContext}}\&\ engineContext)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00036}00036\ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00037}00037\ \ \ \ \ \mbox{\hyperlink{class_game_state_a98a9fbfcd4afe6bcd90fc94d5aa93b85}{GameState::LateInit}}(engineContext);}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00038}00038\ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00039}00039\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00040}\mbox{\hyperlink{class_loading_state_a56063d7d8b5ae48cbbee33d16aad3e93}{00040}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_loading_state_a56063d7d8b5ae48cbbee33d16aad3e93}{LoadingState::Update}}(\textcolor{keywordtype}{float}\ dt,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_engine_context}{EngineContext}}\&\ engineContext)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00041}00041\ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00042}00042\ \ \ \ \ \textcolor{keyword}{auto}\ done\ =\ \mbox{\hyperlink{class_loading_state_af7bd294a5dfe6f36c4e6291bf64aa219}{loader}}.FetchCompleted();}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00043}00043\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ r\ :\ done)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00044}00044\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00045}00045\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_loading_state_a8d02a948b169581ad59b589c67f1f589}{UploadToGPU}}(r,\ engineContext);}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00046}00046\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00048}00048\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_loading_state_aecfe4e3c0b70523fe2f15935743340a3}{progressText}})}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00049}00049\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00050}00050\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pct\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{class_loading_state_a2a2abd4d6eae2b9f012e02bdc718dd69}{GetProgress01}}()\ *\ 100.0f);}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00051}00051\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_loading_state_aecfe4e3c0b70523fe2f15935743340a3}{progressText}}-\/>SetText(\textcolor{stringliteral}{"{}Loading...\ "{}}\ +\ std::to\_string(pct)\ +\ \textcolor{stringliteral}{"{}\%"{}});}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00052}00052\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00053}00053\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00054}00054\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_loading_state_af7bd294a5dfe6f36c4e6291bf64aa219}{loader}}.HasFinished()\ \&\&\ \mbox{\hyperlink{class_loading_state_a40db3522932ae35699d1db2ab5d728b0}{nextFactory}})}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00055}00055\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00056}00056\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ done\ =\ \mbox{\hyperlink{class_loading_state_af7bd294a5dfe6f36c4e6291bf64aa219}{loader}}.FetchCompleted();}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00057}00057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ r\ :\ done)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00058}00058\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00059}00059\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_loading_state_a8d02a948b169581ad59b589c67f1f589}{UploadToGPU}}(r,\ engineContext);}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00060}00060\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00061}00061\ \ \ \ \ \ \ \ \ engineContext.\mbox{\hyperlink{struct_engine_context_a67f96c1b09ab0393d4f8434900d7419a}{stateManager}}-\/>\mbox{\hyperlink{class_state_manager_a5337ecd1c035794817b1de05f961d352}{ChangeState}}(\mbox{\hyperlink{class_loading_state_a40db3522932ae35699d1db2ab5d728b0}{nextFactory}}());}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00062}00062\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00063}00063\ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00065}\mbox{\hyperlink{class_loading_state_a7f934a83650c18f8603320de29a18fbe}{00065}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_loading_state_a7f934a83650c18f8603320de29a18fbe}{LoadingState::LateUpdate}}(\textcolor{keywordtype}{float}\ dt,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_engine_context}{EngineContext}}\&\ engineContext)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00066}00066\ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00067}00067\ \ \ \ \ \mbox{\hyperlink{class_game_state_a5079b8eccc7846e03e17917e07d6da3f}{GameState::LateUpdate}}(dt,\ engineContext);}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00068}00068\ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00069}00069\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00070}\mbox{\hyperlink{class_loading_state_a9d7471af478429371619bff2ccda0e2a}{00070}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_loading_state_a9d7471af478429371619bff2ccda0e2a}{LoadingState::Draw}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_engine_context}{EngineContext}}\&\ engineContext)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00071}00071\ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00072}00072\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ w\ =\ engineContext.\mbox{\hyperlink{struct_engine_context_ab6fa006055c2a224931059f7ed840bed}{windowManager}}-\/>\mbox{\hyperlink{class_window_manager_ad8e16ad88c8eb3e3889d5c3dbe7891cb}{GetWidth}}();}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00073}00073\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ h\ =\ engineContext.\mbox{\hyperlink{struct_engine_context_ab6fa006055c2a224931059f7ed840bed}{windowManager}}-\/>\mbox{\hyperlink{class_window_manager_a50c9f12a67f69e822b4e70077773c9ca}{GetHeight}}();}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00074}00074\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00075}00075\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ barW\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(w\ *\ 0.6f);}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00076}00076\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ barH\ =\ 24;}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00077}00077\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ x\ =\ (w\ -\/\ barW)\ /\ 2;}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00078}00078\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ y\ =\ h\ /\ 2\ -\/\ barH;}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00079}00079\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00080}00080\ \ \ \ \ engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_a80b5e6df0bbbb276abb3a2da87bb2007}{ClearBackground}}(x,\ y,\ barW,\ barH,\ \{\ 0.2f,\ 0.2f,\ 0.2f,\ 1.0f\ \});}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00081}00081\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00082}00082\ \ \ \ \ \textcolor{keywordtype}{int}\ filled\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(barW\ *\ \mbox{\hyperlink{class_loading_state_a2a2abd4d6eae2b9f012e02bdc718dd69}{GetProgress01}}());}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00083}00083\ \ \ \ \ \textcolor{keywordflow}{if}\ (filled\ >\ 0)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00084}00084\ \ \ \ \ \ \ \ \ engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_a80b5e6df0bbbb276abb3a2da87bb2007}{ClearBackground}}(x,\ y,\ filled,\ barH,\ \{\ 0.1f,\ 0.4f,\ 1.0f,\ 1.0f\ \});}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00085}00085\ \ \ \ \ \mbox{\hyperlink{class_game_state_a688b4f8864623a3d8e9ad873434b062e}{objectManager}}.DrawAll(engineContext);}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00086}00086\ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00087}00087\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00088}\mbox{\hyperlink{class_loading_state_a3754de47c0b00b40517645df5e5625cf}{00088}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_loading_state_a3754de47c0b00b40517645df5e5625cf}{LoadingState::Unload}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_engine_context}{EngineContext}}\&\ engineContext)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00089}00089\ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00090}00090\ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00092}\mbox{\hyperlink{class_loading_state_a1f2fb872ba3b6dbcb11bfbc46b72c386}{00092}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_loading_state_a1f2fb872ba3b6dbcb11bfbc46b72c386}{LoadingState::Free}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_engine_context}{EngineContext}}\&\ engineContext)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00093}00093\ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00094}00094\ \ \ \ \ \mbox{\hyperlink{class_loading_state_af7bd294a5dfe6f36c4e6291bf64aa219}{loader}}.Stop();}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00095}00095\ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00096}00096\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00097}00097\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ Queue\ API\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00098}00098\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00099}\mbox{\hyperlink{class_loading_state_af0573a8838bb173f6bd6c6a881931cd8}{00099}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_loading_state_af0573a8838bb173f6bd6c6a881931cd8}{LoadingState::QueueTexture}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_engine_context}{EngineContext}}\&\ engineContext,\ \textcolor{keyword}{const}\ std::string\&\ tag,\ \textcolor{keyword}{const}\ std::string\&\ filePath,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_texture_settings}{TextureSettings}}\&\ settings)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00100}00100\ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00101}00101\ \ \ \ \ \textcolor{keywordflow}{if}\ (engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_a687a26c8df1f31684d40c4c122480194}{HasTexture}}(tag))}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00102}00102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00103}00103\ \ \ \ \ \mbox{\hyperlink{class_loading_state_af7bd294a5dfe6f36c4e6291bf64aa219}{loader}}.Enqueue(\mbox{\hyperlink{struct_texture_job}{TextureJob}}\{\ tag,\ filePath,\ settings\ \});}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00104}00104\ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00105}00105\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00106}\mbox{\hyperlink{class_loading_state_aeeeb157f13d158cd0d4ae1590dec2178}{00106}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_loading_state_aeeeb157f13d158cd0d4ae1590dec2178}{LoadingState::QueueShader}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_engine_context}{EngineContext}}\&\ engineContext,\ \textcolor{keyword}{const}\ std::string\&\ tag,\ \textcolor{keyword}{const}\ std::vector<std::pair<ShaderStage,\ FilePath>>\&\ files)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00107}00107\ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00108}00108\ \ \ \ \ \textcolor{keywordflow}{if}\ (engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_af2a96d2e81a279531985c0f1ef093e76}{HasShader}}(tag))}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00109}00109\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00110}00110\ \ \ \ \ \mbox{\hyperlink{struct_shader_job}{ShaderJob}}\ job;}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00111}00111\ \ \ \ \ job.\mbox{\hyperlink{struct_shader_job_a1bcf780b68eb6f40150fae5d7cc83df5}{tag}}\ =\ tag;}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00112}00112\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ f\ :\ files)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00113}00113\ \ \ \ \ \ \ \ \ job.\mbox{\hyperlink{struct_shader_job_a5eb2b74c79feb2632bb8a0e9ec39f0fc}{sources}}.push\_back(\mbox{\hyperlink{struct_shader_file}{ShaderFile}}\{\ f.first,\ f.second\ \});}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00114}00114\ \ \ \ \ \mbox{\hyperlink{class_loading_state_af7bd294a5dfe6f36c4e6291bf64aa219}{loader}}.Enqueue(job);}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00115}00115\ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00116}00116\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00117}\mbox{\hyperlink{class_loading_state_a6f683c033cd51cf736410353556ff668}{00117}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_loading_state_a6f683c033cd51cf736410353556ff668}{LoadingState::QueueFont}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_engine_context}{EngineContext}}\&\ engineContext,\ \textcolor{keyword}{const}\ std::string\&\ tag,\ \textcolor{keyword}{const}\ std::string\&\ ttfPath,\ uint32\_t\ pixelSize)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00118}00118\ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00119}00119\ \ \ \ \ \textcolor{keywordflow}{if}\ (engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_a125f91cca7722e193b0d60f408f50858}{HasFont}}(tag))}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00120}00120\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00121}00121\ \ \ \ \ \mbox{\hyperlink{class_loading_state_af7bd294a5dfe6f36c4e6291bf64aa219}{loader}}.Enqueue(\mbox{\hyperlink{struct_font_job}{FontJob}}\{\ tag,\ ttfPath,\ pixelSize\ \});}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00122}00122\ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00123}00123\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00124}\mbox{\hyperlink{class_loading_state_ae0f36c66d2fdfd6b186b49dac023ca27}{00124}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_loading_state_ae0f36c66d2fdfd6b186b49dac023ca27}{LoadingState::QueueSound}}(\textcolor{keyword}{const}\ std::string\&\ tag,\ \textcolor{keyword}{const}\ std::string\&\ path,\ \textcolor{keywordtype}{bool}\ loop)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00125}00125\ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00126}00126\ \ \ \ \ \mbox{\hyperlink{class_loading_state_af7bd294a5dfe6f36c4e6291bf64aa219}{loader}}.Enqueue(\mbox{\hyperlink{struct_sound_job}{SoundJob}}\{\ tag,\ path,\ loop\ \});}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00127}00127\ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00128}00128\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00129}00129\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00130}00130\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ GPU\ Upload\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00131}00131\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00132}\mbox{\hyperlink{class_loading_state_a8d02a948b169581ad59b589c67f1f589}{00132}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_loading_state_a8d02a948b169581ad59b589c67f1f589}{LoadingState::UploadToGPU}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{_async_resource_loader_8h_a6a60ad85728d8591ed1f4246e5d3af21}{LoadResult}}\&\ r,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_engine_context}{EngineContext}}\&\ engineContext)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00133}00133\ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00134}00134\ \ \ \ \ std::visit([\&](\textcolor{keyword}{auto}\&\&\ res)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00135}00135\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00136}00136\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }T\ =\ std::decay\_t<\textcolor{keyword}{decltype}(res)>;}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00137}00137\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<T,\ TextureResult>)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00138}00138\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00139}00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!res.ok)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00140}00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00141}00141\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00142}00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ tex\ =\ std::make\_unique<Texture>(res.pixels.data(),\ res.width,\ res.height,\ res.channels,\ res.settings);}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00143}00143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_a8645efdc911bde8ae83409d18a2d9cfd}{RegisterTexture}}(res.tag,\ std::move(tex));}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00144}00144\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00145}00145\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<T,\ ShaderResult>)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00146}00146\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00147}00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!res.ok)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00148}00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00149}00149\ }
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00150}00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ shader\ =\ std::make\_unique<Shader>();}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00151}00151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ s\ :\ res.sources)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shader-\/>AttachFromSource(s.stage,\ s.source);}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00154}00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00155}00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!shader-\/>Link())}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00156}00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00157}00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ JIN\_ERR(\textcolor{stringliteral}{"{}Shader\ link\ failed\ (tag="{}}\ <<\ res.tag\ <<\ \textcolor{stringliteral}{"{})"{}});}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00158}00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_a3ad25e59a96852a1685a0eba9898d11d}{RegisterShader}}(res.tag,\ std::move(shader));}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00161}00161\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00162}00162\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<T,\ FontResult>)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00163}00163\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00164}00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_a0762465f3bfa7573ec3261767a68eb16}{RegisterFont}}(res.tag,\ res.ttfPath,\ res.pixelSize);}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00165}00165\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00166}00166\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<T,\ SoundResult>)}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00167}00167\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00168}00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ engineContext.\mbox{\hyperlink{struct_engine_context_aa5985216cfd74ab389769abc5a5fdfb6}{soundManager}}-\/>\mbox{\hyperlink{class_sound_manager_a8e52926369f4ff23599507c5e7cf7246}{LoadSound}}(res.tag,\ res.filePath,\ res.loop);}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00169}00169\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00170}00170\ \ \ \ \ \ \ \ \ \},\ r);}
\DoxyCodeLine{\Hypertarget{_loading_state_8cpp_source_l00171}00171\ \}}

\end{DoxyCode}
