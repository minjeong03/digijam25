\doxysection{Async\+Resource\+Loader Class Reference}
\hypertarget{class_async_resource_loader}{}\label{class_async_resource_loader}\index{AsyncResourceLoader@{AsyncResourceLoader}}


Background worker that processes resource load requests asynchronously.  




{\ttfamily \#include $<$Async\+Resource\+Loader.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_async_resource_loader_ae91bb7fb1c4e67301e52fca4e11f102b}{Async\+Resource\+Loader}} ()=default
\begin{DoxyCompactList}\small\item\em Constructs an \doxylink{class_async_resource_loader}{Async\+Resource\+Loader} in a stopped state. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_async_resource_loader_af67c49c71131de520765f33060dd1058}{\texorpdfstring{$\sim$}{\string~}\+Async\+Resource\+Loader}} ()
\begin{DoxyCompactList}\small\item\em Destroys the loader and stops the worker thread if running. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_async_resource_loader_a81675496e3c264ebbaace9cc50c628a6}{Start}} ()
\begin{DoxyCompactList}\small\item\em Starts the worker thread if it is not already running. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_async_resource_loader_a9c9c0751fe57d2d90910b79bbcd4c18f}{Stop}} ()
\begin{DoxyCompactList}\small\item\em Requests the worker thread to stop and waits for it to finish. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_async_resource_loader_a1320ce4977f58e8a69689ae1eead3b09}{Enqueue}} (const \mbox{\hyperlink{_async_resource_loader_8h_ae1b8cce382c5ee957e16be16b2cded39}{Load\+Request}} \&req)
\begin{DoxyCompactList}\small\item\em Enqueues a load request and increases the total request count. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{class_async_resource_loader_a5689fa771581393a3186273928d5fae0}{Get\+Progress}} () const
\begin{DoxyCompactList}\small\item\em Returns progress as loaded\+Count / total\+Count. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_async_resource_loader_a7274278fd5afa70521a8dfa262fcc18e}{Has\+Finished}} () const
\begin{DoxyCompactList}\small\item\em Returns whether the loader considers all work finished. \end{DoxyCompactList}\item 
std\+::vector$<$ \mbox{\hyperlink{_async_resource_loader_8h_a6a60ad85728d8591ed1f4246e5d3af21}{Load\+Result}} $>$ \mbox{\hyperlink{class_async_resource_loader_a3352680b3061a6abb1970de6cd609eb7}{Fetch\+Completed}} ()
\begin{DoxyCompactList}\small\item\em Fetches completed results produced by the worker and clears internal storage. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_async_resource_loader_ac95aaba5184c87571d1fbbab20f21852}{Get\+Total\+Count}} () const
\begin{DoxyCompactList}\small\item\em Returns the total number of requests enqueued so far. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_async_resource_loader_a79a2c351242e90b7562d4729d6e4b63f}{Get\+Loaded\+Count}} () const
\begin{DoxyCompactList}\small\item\em Returns the number of requests that have finished processing. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_async_resource_loader_a6d6735825994934b75a0a17574e2bc30}{Worker}} ()
\begin{DoxyCompactList}\small\item\em Worker thread main loop that processes queued requests. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::thread \mbox{\hyperlink{class_async_resource_loader_a6a3df46c4e1e3b50d93e648316c3a4a2}{worker\+Thread}}
\item 
std\+::atomic$<$ bool $>$ \mbox{\hyperlink{class_async_resource_loader_a241ba91f425aca1cb7ef29e1204e8ab8}{running}} \{ false \}
\item 
std\+::queue$<$ \mbox{\hyperlink{_async_resource_loader_8h_ae1b8cce382c5ee957e16be16b2cded39}{Load\+Request}} $>$ \mbox{\hyperlink{class_async_resource_loader_aa235d8c1f3f3a055245983ec6e8f6e18}{request\+Queue}}
\item 
std\+::mutex \mbox{\hyperlink{class_async_resource_loader_ad704ddc2357b43bef5bc75f211bae71c}{queue\+Mutex}}
\item 
std\+::condition\+\_\+variable \mbox{\hyperlink{class_async_resource_loader_a26382b1f0dc319ae9fb3c0561f4edb6a}{cv}}
\item 
std\+::vector$<$ \mbox{\hyperlink{_async_resource_loader_8h_a6a60ad85728d8591ed1f4246e5d3af21}{Load\+Result}} $>$ \mbox{\hyperlink{class_async_resource_loader_a849aef3d6c1fd0ac57461e11f6d28d65}{completed}}
\item 
std\+::mutex \mbox{\hyperlink{class_async_resource_loader_a2e86e6e3efd75ef87eeb648eae4421e3}{completed\+Mutex}}
\item 
std\+::atomic$<$ int $>$ \mbox{\hyperlink{class_async_resource_loader_af77d0f813bd3f2d3237a4f168748d22b}{total\+Count}} \{ 0 \}
\item 
std\+::atomic$<$ int $>$ \mbox{\hyperlink{class_async_resource_loader_ab47b6e7928f1111788e0d51fa0f177c1}{loaded\+Count}} \{ 0 \}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Background worker that processes resource load requests asynchronously. 

\doxylink{class_async_resource_loader}{Async\+Resource\+Loader} maintains\+:
\begin{DoxyItemize}
\item A worker thread that runs \doxylink{class_async_resource_loader_a6d6735825994934b75a0a17574e2bc30}{Worker()}
\item A thread-\/safe request queue guarded by queue\+Mutex + condition\+\_\+variable
\item A completed result list guarded by completed\+Mutex
\item Atomic counters (total\+Count / loaded\+Count) for progress reporting
\end{DoxyItemize}

Typical usage pattern\+: 1) \doxylink{class_async_resource_loader_a81675496e3c264ebbaace9cc50c628a6}{Start()} 2) Enqueue(...) one or more \doxylink{_async_resource_loader_8h_ae1b8cce382c5ee957e16be16b2cded39}{Load\+Request} 3) Periodically poll Get\+Progress / Has\+Finished and \doxylink{class_async_resource_loader_a3352680b3061a6abb1970de6cd609eb7}{Fetch\+Completed()} 4) \doxylink{class_async_resource_loader_a9c9c0751fe57d2d90910b79bbcd4c18f}{Stop()} (or rely on destructor to stop/join)

Fetch\+Completed is expected to transfer completed results to the caller (and clear the internal list), allowing the main thread to register/compile GPU resources safely. 

Definition at line \mbox{\hyperlink{_async_resource_loader_8h_source_l00225}{225}} of file \mbox{\hyperlink{_async_resource_loader_8h_source}{Async\+Resource\+Loader.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{class_async_resource_loader_ae91bb7fb1c4e67301e52fca4e11f102b}\index{AsyncResourceLoader@{AsyncResourceLoader}!AsyncResourceLoader@{AsyncResourceLoader}}
\index{AsyncResourceLoader@{AsyncResourceLoader}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{AsyncResourceLoader()}{AsyncResourceLoader()}}
{\footnotesize\ttfamily \label{class_async_resource_loader_ae91bb7fb1c4e67301e52fca4e11f102b} 
Async\+Resource\+Loader\+::\+Async\+Resource\+Loader (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



Constructs an \doxylink{class_async_resource_loader}{Async\+Resource\+Loader} in a stopped state. 

\Hypertarget{class_async_resource_loader_af67c49c71131de520765f33060dd1058}\index{AsyncResourceLoader@{AsyncResourceLoader}!````~AsyncResourceLoader@{\texorpdfstring{$\sim$}{\string~}AsyncResourceLoader}}
\index{````~AsyncResourceLoader@{\texorpdfstring{$\sim$}{\string~}AsyncResourceLoader}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}AsyncResourceLoader()}{\string~AsyncResourceLoader()}}
{\footnotesize\ttfamily \label{class_async_resource_loader_af67c49c71131de520765f33060dd1058} 
Async\+Resource\+Loader\+::\texorpdfstring{$\sim$}{\string~}\+Async\+Resource\+Loader (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Destroys the loader and stops the worker thread if running. 

The destructor is expected to ensure the worker thread is not left running. A typical implementation calls \doxylink{class_async_resource_loader_a9c9c0751fe57d2d90910b79bbcd4c18f}{Stop()} and joins the thread. 

Definition at line \mbox{\hyperlink{_async_resource_loader_8cpp_source_l00021}{21}} of file \mbox{\hyperlink{_async_resource_loader_8cpp_source}{Async\+Resource\+Loader.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00022\ \{}
\DoxyCodeLine{00023\ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_a9c9c0751fe57d2d90910b79bbcd4c18f}{Stop}}();}
\DoxyCodeLine{00024\ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{class_async_resource_loader_a1320ce4977f58e8a69689ae1eead3b09}\index{AsyncResourceLoader@{AsyncResourceLoader}!Enqueue@{Enqueue}}
\index{Enqueue@{Enqueue}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{Enqueue()}{Enqueue()}}
{\footnotesize\ttfamily \label{class_async_resource_loader_a1320ce4977f58e8a69689ae1eead3b09} 
void Async\+Resource\+Loader\+::\+Enqueue (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{_async_resource_loader_8h_ae1b8cce382c5ee957e16be16b2cded39}{Load\+Request}} \&}]{req}{}\end{DoxyParamCaption})}



Enqueues a load request and increases the total request count. 

Pushes the request into request\+Queue under queue\+Mutex protection and increments total\+Count. Then notifies the worker thread via cv.\+notify\+\_\+one().


\begin{DoxyParams}{Parameters}
{\em req} & Load request variant to enqueue. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_async_resource_loader_8cpp_source_l00052}{52}} of file \mbox{\hyperlink{_async_resource_loader_8cpp_source}{Async\+Resource\+Loader.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00053\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ lk(\mbox{\hyperlink{class_async_resource_loader_ad704ddc2357b43bef5bc75f211bae71c}{queueMutex}});}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_aa235d8c1f3f3a055245983ec6e8f6e18}{requestQueue}}.push(req);}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_af77d0f813bd3f2d3237a4f168748d22b}{totalCount}}.fetch\_add(1);}
\DoxyCodeLine{00058\ \ \ \ \ \}}
\DoxyCodeLine{00059\ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_a26382b1f0dc319ae9fb3c0561f4edb6a}{cv}}.notify\_one();}
\DoxyCodeLine{00060\ \}}

\end{DoxyCode}
\Hypertarget{class_async_resource_loader_a3352680b3061a6abb1970de6cd609eb7}\index{AsyncResourceLoader@{AsyncResourceLoader}!FetchCompleted@{FetchCompleted}}
\index{FetchCompleted@{FetchCompleted}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{FetchCompleted()}{FetchCompleted()}}
{\footnotesize\ttfamily \label{class_async_resource_loader_a3352680b3061a6abb1970de6cd609eb7} 
std\+::vector$<$ \mbox{\hyperlink{_async_resource_loader_8h_a6a60ad85728d8591ed1f4246e5d3af21}{Load\+Result}} $>$ Async\+Resource\+Loader\+::\+Fetch\+Completed (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [nodiscard]}}



Fetches completed results produced by the worker and clears internal storage. 

This function\+:
\begin{DoxyItemize}
\item Locks completed\+Mutex
\item Swaps internal completed vector with a local vector
\item Returns the local vector
\end{DoxyItemize}

Because swap() is used, this operation is efficient and leaves the internal completed vector empty after the call.

\begin{DoxyReturn}{Returns}
List of completed results since the last fetch. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_async_resource_loader_8cpp_source_l00075}{75}} of file \mbox{\hyperlink{_async_resource_loader_8cpp_source}{Async\+Resource\+Loader.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00076\ \{}
\DoxyCodeLine{00077\ \ \ \ \ std::vector<LoadResult>\ out;}
\DoxyCodeLine{00078\ \ \ \ \ std::lock\_guard<std::mutex>\ lk(\mbox{\hyperlink{class_async_resource_loader_a2e86e6e3efd75ef87eeb648eae4421e3}{completedMutex}});}
\DoxyCodeLine{00079\ \ \ \ \ out.swap(\mbox{\hyperlink{class_async_resource_loader_a849aef3d6c1fd0ac57461e11f6d28d65}{completed}});}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{00081\ \}}

\end{DoxyCode}
\Hypertarget{class_async_resource_loader_a79a2c351242e90b7562d4729d6e4b63f}\index{AsyncResourceLoader@{AsyncResourceLoader}!GetLoadedCount@{GetLoadedCount}}
\index{GetLoadedCount@{GetLoadedCount}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{GetLoadedCount()}{GetLoadedCount()}}
{\footnotesize\ttfamily \label{class_async_resource_loader_a79a2c351242e90b7562d4729d6e4b63f} 
int Async\+Resource\+Loader\+::\+Get\+Loaded\+Count (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [nodiscard]}}



Returns the number of requests that have finished processing. 



Definition at line \mbox{\hyperlink{_async_resource_loader_8h_source_l00327}{327}} of file \mbox{\hyperlink{_async_resource_loader_8h_source}{Async\+Resource\+Loader.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00327\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_async_resource_loader_ab47b6e7928f1111788e0d51fa0f177c1}{loadedCount}}.load();\ \}}

\end{DoxyCode}
\Hypertarget{class_async_resource_loader_a5689fa771581393a3186273928d5fae0}\index{AsyncResourceLoader@{AsyncResourceLoader}!GetProgress@{GetProgress}}
\index{GetProgress@{GetProgress}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{GetProgress()}{GetProgress()}}
{\footnotesize\ttfamily \label{class_async_resource_loader_a5689fa771581393a3186273928d5fae0} 
float Async\+Resource\+Loader\+::\+Get\+Progress (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [nodiscard]}}



Returns progress as loaded\+Count / total\+Count. 

Implementation policy\+:
\begin{DoxyItemize}
\item If total\+Count \texorpdfstring{$<$}{<}= 0, this function returns 1.\+0f.
\item Otherwise returns done / tot as float.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
Progress ratio. Returns 1.\+0f when no requests have been enqueued. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_async_resource_loader_8cpp_source_l00062}{62}} of file \mbox{\hyperlink{_async_resource_loader_8cpp_source}{Async\+Resource\+Loader.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00063\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordtype}{int}\ tot\ =\ \mbox{\hyperlink{class_async_resource_loader_af77d0f813bd3f2d3237a4f168748d22b}{totalCount}}.load();}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordtype}{int}\ done\ =\ \mbox{\hyperlink{class_async_resource_loader_ab47b6e7928f1111788e0d51fa0f177c1}{loadedCount}}.load();}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordflow}{if}\ (tot\ <=\ 0)\ \textcolor{keywordflow}{return}\ 1.0f;}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(done)\ /\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(tot);}
\DoxyCodeLine{00068\ \}}

\end{DoxyCode}
\Hypertarget{class_async_resource_loader_ac95aaba5184c87571d1fbbab20f21852}\index{AsyncResourceLoader@{AsyncResourceLoader}!GetTotalCount@{GetTotalCount}}
\index{GetTotalCount@{GetTotalCount}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{GetTotalCount()}{GetTotalCount()}}
{\footnotesize\ttfamily \label{class_async_resource_loader_ac95aaba5184c87571d1fbbab20f21852} 
int Async\+Resource\+Loader\+::\+Get\+Total\+Count (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [nodiscard]}}



Returns the total number of requests enqueued so far. 



Definition at line \mbox{\hyperlink{_async_resource_loader_8h_source_l00322}{322}} of file \mbox{\hyperlink{_async_resource_loader_8h_source}{Async\+Resource\+Loader.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00322\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_async_resource_loader_af77d0f813bd3f2d3237a4f168748d22b}{totalCount}}.load();\ \}}

\end{DoxyCode}
\Hypertarget{class_async_resource_loader_a7274278fd5afa70521a8dfa262fcc18e}\index{AsyncResourceLoader@{AsyncResourceLoader}!HasFinished@{HasFinished}}
\index{HasFinished@{HasFinished}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{HasFinished()}{HasFinished()}}
{\footnotesize\ttfamily \label{class_async_resource_loader_a7274278fd5afa70521a8dfa262fcc18e} 
bool Async\+Resource\+Loader\+::\+Has\+Finished (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [nodiscard]}}



Returns whether the loader considers all work finished. 

Current implementation returns true only when\+:
\begin{DoxyItemize}
\item loaded\+Count \texorpdfstring{$>$}{>}= total\+Count
\item total\+Count \texorpdfstring{$>$}{>} 0
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
true if finished according to counters; false otherwise. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_async_resource_loader_8cpp_source_l00070}{70}} of file \mbox{\hyperlink{_async_resource_loader_8cpp_source}{Async\+Resource\+Loader.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00071\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_async_resource_loader_ab47b6e7928f1111788e0d51fa0f177c1}{loadedCount}}.load()\ >=\ \mbox{\hyperlink{class_async_resource_loader_af77d0f813bd3f2d3237a4f168748d22b}{totalCount}}.load()\ \&\&\ \mbox{\hyperlink{class_async_resource_loader_af77d0f813bd3f2d3237a4f168748d22b}{totalCount}}.load()\ >\ 0;}
\DoxyCodeLine{00073\ \}}

\end{DoxyCode}
\Hypertarget{class_async_resource_loader_a81675496e3c264ebbaace9cc50c628a6}\index{AsyncResourceLoader@{AsyncResourceLoader}!Start@{Start}}
\index{Start@{Start}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{Start()}{Start()}}
{\footnotesize\ttfamily \label{class_async_resource_loader_a81675496e3c264ebbaace9cc50c628a6} 
void Async\+Resource\+Loader\+::\+Start (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Starts the worker thread if it is not already running. 

If running is already true, \doxylink{class_async_resource_loader_a81675496e3c264ebbaace9cc50c628a6}{Start()} returns immediately without creating a new thread. When started, worker\+Thread runs \doxylink{class_async_resource_loader_a6d6735825994934b75a0a17574e2bc30}{Worker()} in a lambda. 

Definition at line \mbox{\hyperlink{_async_resource_loader_8cpp_source_l00026}{26}} of file \mbox{\hyperlink{_async_resource_loader_8cpp_source}{Async\+Resource\+Loader.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00027\ \{}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_async_resource_loader_a241ba91f425aca1cb7ef29e1204e8ab8}{running}}.load())}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00030\ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_a241ba91f425aca1cb7ef29e1204e8ab8}{running}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00031\ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_a6a3df46c4e1e3b50d93e648316c3a4a2}{workerThread}}\ =\ std::thread([\textcolor{keyword}{this}]()}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_a6d6735825994934b75a0a17574e2bc30}{Worker}}();}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00035\ \}}

\end{DoxyCode}
\Hypertarget{class_async_resource_loader_a9c9c0751fe57d2d90910b79bbcd4c18f}\index{AsyncResourceLoader@{AsyncResourceLoader}!Stop@{Stop}}
\index{Stop@{Stop}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{Stop()}{Stop()}}
{\footnotesize\ttfamily \label{class_async_resource_loader_a9c9c0751fe57d2d90910b79bbcd4c18f} 
void Async\+Resource\+Loader\+::\+Stop (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Requests the worker thread to stop and waits for it to finish. 

\doxylink{class_async_resource_loader_a9c9c0751fe57d2d90910b79bbcd4c18f}{Stop()} performs the following\+:
\begin{DoxyItemize}
\item If running is false, returns immediately.
\item Under queue\+Mutex, sets running to false.
\item Notifies all waiters via cv.\+notify\+\_\+all().
\item Joins worker\+Thread if joinable.
\end{DoxyItemize}

\doxylink{class_async_resource_loader_a6d6735825994934b75a0a17574e2bc30}{Worker()} exits when\+:
\begin{DoxyItemize}
\item running is false AND request\+Queue is empty. If running becomes false but there are still queued requests, \doxylink{class_async_resource_loader_a6d6735825994934b75a0a17574e2bc30}{Worker()} will continue processing until the queue is drained. 
\end{DoxyItemize}

Definition at line \mbox{\hyperlink{_async_resource_loader_8cpp_source_l00037}{37}} of file \mbox{\hyperlink{_async_resource_loader_8cpp_source}{Async\+Resource\+Loader.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00038\ \{}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_async_resource_loader_a241ba91f425aca1cb7ef29e1204e8ab8}{running}}.load())}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \{}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ lk(\mbox{\hyperlink{class_async_resource_loader_ad704ddc2357b43bef5bc75f211bae71c}{queueMutex}});}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_a241ba91f425aca1cb7ef29e1204e8ab8}{running}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00045\ \ \ \ \ \}}
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_a26382b1f0dc319ae9fb3c0561f4edb6a}{cv}}.notify\_all();}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_async_resource_loader_a6a3df46c4e1e3b50d93e648316c3a4a2}{workerThread}}.joinable())}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_a6a3df46c4e1e3b50d93e648316c3a4a2}{workerThread}}.join();}
\DoxyCodeLine{00050\ \}}

\end{DoxyCode}
\Hypertarget{class_async_resource_loader_a6d6735825994934b75a0a17574e2bc30}\index{AsyncResourceLoader@{AsyncResourceLoader}!Worker@{Worker}}
\index{Worker@{Worker}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{Worker()}{Worker()}}
{\footnotesize\ttfamily \label{class_async_resource_loader_a6d6735825994934b75a0a17574e2bc30} 
void Async\+Resource\+Loader\+::\+Worker (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Worker thread main loop that processes queued requests. 

\doxylink{class_async_resource_loader_a6d6735825994934b75a0a17574e2bc30}{Worker()} performs\+:
\begin{DoxyItemize}
\item stbi\+\_\+set\+\_\+flip\+\_\+vertically\+\_\+on\+\_\+load(true) once at the start of the thread.
\item Waits on cv until (running is false) OR (request\+Queue is not empty).
\item Exits only when running is false AND the queue is empty.
\item Processes one request at a time by visiting the \doxylink{_async_resource_loader_8h_ae1b8cce382c5ee957e16be16b2cded39}{Load\+Request} variant.
\end{DoxyItemize}

For each processed request\+:
\begin{DoxyItemize}
\item A corresponding \doxylink{_async_resource_loader_8h_a6a60ad85728d8591ed1f4246e5d3af21}{Load\+Result} is appended to completed (except \doxylink{struct_sprite_sheet_job}{Sprite\+Sheet\+Job}, which is not handled).
\item loaded\+Count is incremented exactly once per request, regardless of success.
\end{DoxyItemize}

Thread-\/safety\+:
\begin{DoxyItemize}
\item request\+Queue is protected by queue\+Mutex.
\item completed is protected by completed\+Mutex. 
\end{DoxyItemize}

Definition at line \mbox{\hyperlink{_async_resource_loader_8cpp_source_l00083}{83}} of file \mbox{\hyperlink{_async_resource_loader_8cpp_source}{Async\+Resource\+Loader.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00084\ \{}
\DoxyCodeLine{00085\ \ \ \ \ stbi\_set\_flip\_vertically\_on\_load(\textcolor{keyword}{true});}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordflow}{while}\ (\textcolor{keyword}{true})}
\DoxyCodeLine{00088\ \ \ \ \ \{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_async_resource_loader_8h_ae1b8cce382c5ee957e16be16b2cded39}{LoadRequest}}\ req;}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ std::unique\_lock<std::mutex>\ lk(\mbox{\hyperlink{class_async_resource_loader_ad704ddc2357b43bef5bc75f211bae71c}{queueMutex}});}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_a26382b1f0dc319ae9fb3c0561f4edb6a}{cv}}.wait(lk,\ [\textcolor{keyword}{this}]()}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ !\mbox{\hyperlink{class_async_resource_loader_a241ba91f425aca1cb7ef29e1204e8ab8}{running}}.load()\ ||\ !\mbox{\hyperlink{class_async_resource_loader_aa235d8c1f3f3a055245983ec6e8f6e18}{requestQueue}}.empty();}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_async_resource_loader_a241ba91f425aca1cb7ef29e1204e8ab8}{running}}.load()\ \&\&\ \mbox{\hyperlink{class_async_resource_loader_aa235d8c1f3f3a055245983ec6e8f6e18}{requestQueue}}.empty())}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ req\ =\ \mbox{\hyperlink{class_async_resource_loader_aa235d8c1f3f3a055245983ec6e8f6e18}{requestQueue}}.front();}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_aa235d8c1f3f3a055245983ec6e8f6e18}{requestQueue}}.pop();}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ std::visit([\textcolor{keyword}{this}](\textcolor{keyword}{auto}\&\&\ job)}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }T\ =\ std::decay\_t<\textcolor{keyword}{decltype}(job)>;}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<T,\ TextureJob>)}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TextureResult\ r;}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_texture_result_a5c534874badcb5bf4d050a13b7539cae}{tag}}\ =\ job.tag;}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_texture_result_a36de397e8aaf253080b1569c15882e69}{settings}}\ =\ job.settings;}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ w\ =\ 0,\ h\ =\ 0,\ ch\ =\ 0;}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*\ data\ =\ stbi\_load(job.filePath.c\_str(),\ \&w,\ \&h,\ \&ch,\ 0);}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (data)}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_texture_result_a6c696c4ace706cf1fb1cb3a352a41924}{width}}\ =\ w;}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_texture_result_a5877e0a05889af4e8d1144bdaa679a5a}{height}}\ =\ h;}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_texture_result_ae713abf848cf45f4e6fe03062b723f5a}{channels}}\ =\ ch;}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_texture_result_ad4e992bbf408c38f8b9c247206d21c42}{pixels}}.assign(data,\ data\ +\ (w\ *\ h\ *\ ch));}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbi\_image\_free(data);}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_texture_result_a57be086c1cb00a217e0796f6b4125216}{ok}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ JIN\_ERR(\textcolor{stringliteral}{"{}Async\ texture\ load\ failed:\ "{}}\ <<\ job.filePath);}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_texture_result_a57be086c1cb00a217e0796f6b4125216}{ok}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ lk(\mbox{\hyperlink{class_async_resource_loader_a2e86e6e3efd75ef87eeb648eae4421e3}{completedMutex}});}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_a849aef3d6c1fd0ac57461e11f6d28d65}{completed}}.emplace\_back(std::move(r));}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<T,\ ShaderJob>)}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ShaderResult\ r;}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_shader_result_ac0cf072f6c38225b14a24f5dd6641432}{tag}}\ =\ job.tag;}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_shader_result_a43e045ed457a35530d5a1ea62a7d361e}{ok}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ f\ :\ job.sources)}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ShaderSource\ src;}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ src.\mbox{\hyperlink{struct_shader_source_a8cedb31bac20e900564eeeb48467640a}{stage}}\ =\ f.stage;}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ src.\mbox{\hyperlink{struct_shader_source_ab14f2db435cabdc1651c75344bbe0111}{source}}\ =\ ReadTextFile(f.path);}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (src.\mbox{\hyperlink{struct_shader_source_ab14f2db435cabdc1651c75344bbe0111}{source}}.empty())}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ JIN\_ERR(\textcolor{stringliteral}{"{}Async\ shader\ file\ read\ failed:\ "{}}\ <<\ f.path);}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_shader_result_a43e045ed457a35530d5a1ea62a7d361e}{ok}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_shader_result_a02194f7377e8b3550f884a69ec5ede9d}{sources}}.emplace\_back(std::move(src));}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ lk(\mbox{\hyperlink{class_async_resource_loader_a2e86e6e3efd75ef87eeb648eae4421e3}{completedMutex}});}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_a849aef3d6c1fd0ac57461e11f6d28d65}{completed}}.emplace\_back(std::move(r));}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<T,\ FontJob>)}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FontResult\ r;}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_font_result_a582ecfa3c687f9020ad6bc502a4579fb}{tag}}\ =\ job.tag;}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_font_result_ad0f66f36c5cc01044788f09330a7d427}{ttfPath}}\ =\ job.ttfPath;}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_font_result_ac8599d01b34faa8c2aa68e956178268d}{pixelSize}}\ =\ job.pixelSize;}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_font_result_a84de4479914a7d00a43df15d10e9e153}{ok}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ lk(\mbox{\hyperlink{class_async_resource_loader_a2e86e6e3efd75ef87eeb648eae4421e3}{completedMutex}});}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_a849aef3d6c1fd0ac57461e11f6d28d65}{completed}}.emplace\_back(std::move(r));}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<T,\ SoundJob>)}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SoundResult\ r;}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_sound_result_a11177b9460d009b44e7b28209baa7622}{tag}}\ =\ job.tag;}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_sound_result_a77cadea03769685e16ec56e93a7a7c55}{filePath}}\ =\ job.filePath;}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_sound_result_a42a122883680aec5e340ad28da270dd0}{loop}}\ =\ job.loop;}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.\mbox{\hyperlink{struct_sound_result_a189cc25ced68b32db2557b1cef81f66e}{ok}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ lk(\mbox{\hyperlink{class_async_resource_loader_a2e86e6e3efd75ef87eeb648eae4421e3}{completedMutex}});}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_a849aef3d6c1fd0ac57461e11f6d28d65}{completed}}.emplace\_back(std::move(r));}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_async_resource_loader_ab47b6e7928f1111788e0d51fa0f177c1}{loadedCount}}.fetch\_add(1);}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \},\ req);}
\DoxyCodeLine{00183\ \ \ \ \ \}}
\DoxyCodeLine{00184\ \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\Hypertarget{class_async_resource_loader_a849aef3d6c1fd0ac57461e11f6d28d65}\index{AsyncResourceLoader@{AsyncResourceLoader}!completed@{completed}}
\index{completed@{completed}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{completed}{completed}}
{\footnotesize\ttfamily \label{class_async_resource_loader_a849aef3d6c1fd0ac57461e11f6d28d65} 
std\+::vector$<$\mbox{\hyperlink{_async_resource_loader_8h_a6a60ad85728d8591ed1f4246e5d3af21}{Load\+Result}}$>$ Async\+Resource\+Loader\+::completed\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_async_resource_loader_8h_source_l00358}{358}} of file \mbox{\hyperlink{_async_resource_loader_8h_source}{Async\+Resource\+Loader.\+h}}.

\Hypertarget{class_async_resource_loader_a2e86e6e3efd75ef87eeb648eae4421e3}\index{AsyncResourceLoader@{AsyncResourceLoader}!completedMutex@{completedMutex}}
\index{completedMutex@{completedMutex}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{completedMutex}{completedMutex}}
{\footnotesize\ttfamily \label{class_async_resource_loader_a2e86e6e3efd75ef87eeb648eae4421e3} 
std\+::mutex Async\+Resource\+Loader\+::completed\+Mutex\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_async_resource_loader_8h_source_l00359}{359}} of file \mbox{\hyperlink{_async_resource_loader_8h_source}{Async\+Resource\+Loader.\+h}}.

\Hypertarget{class_async_resource_loader_a26382b1f0dc319ae9fb3c0561f4edb6a}\index{AsyncResourceLoader@{AsyncResourceLoader}!cv@{cv}}
\index{cv@{cv}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{cv}{cv}}
{\footnotesize\ttfamily \label{class_async_resource_loader_a26382b1f0dc319ae9fb3c0561f4edb6a} 
std\+::condition\+\_\+variable Async\+Resource\+Loader\+::cv\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_async_resource_loader_8h_source_l00356}{356}} of file \mbox{\hyperlink{_async_resource_loader_8h_source}{Async\+Resource\+Loader.\+h}}.

\Hypertarget{class_async_resource_loader_ab47b6e7928f1111788e0d51fa0f177c1}\index{AsyncResourceLoader@{AsyncResourceLoader}!loadedCount@{loadedCount}}
\index{loadedCount@{loadedCount}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{loadedCount}{loadedCount}}
{\footnotesize\ttfamily \label{class_async_resource_loader_ab47b6e7928f1111788e0d51fa0f177c1} 
std\+::atomic$<$int$>$ Async\+Resource\+Loader\+::loaded\+Count \{ 0 \}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_async_resource_loader_8h_source_l00362}{362}} of file \mbox{\hyperlink{_async_resource_loader_8h_source}{Async\+Resource\+Loader.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00362\ \{\ 0\ \};}

\end{DoxyCode}
\Hypertarget{class_async_resource_loader_ad704ddc2357b43bef5bc75f211bae71c}\index{AsyncResourceLoader@{AsyncResourceLoader}!queueMutex@{queueMutex}}
\index{queueMutex@{queueMutex}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{queueMutex}{queueMutex}}
{\footnotesize\ttfamily \label{class_async_resource_loader_ad704ddc2357b43bef5bc75f211bae71c} 
std\+::mutex Async\+Resource\+Loader\+::queue\+Mutex\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_async_resource_loader_8h_source_l00355}{355}} of file \mbox{\hyperlink{_async_resource_loader_8h_source}{Async\+Resource\+Loader.\+h}}.

\Hypertarget{class_async_resource_loader_aa235d8c1f3f3a055245983ec6e8f6e18}\index{AsyncResourceLoader@{AsyncResourceLoader}!requestQueue@{requestQueue}}
\index{requestQueue@{requestQueue}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{requestQueue}{requestQueue}}
{\footnotesize\ttfamily \label{class_async_resource_loader_aa235d8c1f3f3a055245983ec6e8f6e18} 
std\+::queue$<$\mbox{\hyperlink{_async_resource_loader_8h_ae1b8cce382c5ee957e16be16b2cded39}{Load\+Request}}$>$ Async\+Resource\+Loader\+::request\+Queue\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_async_resource_loader_8h_source_l00354}{354}} of file \mbox{\hyperlink{_async_resource_loader_8h_source}{Async\+Resource\+Loader.\+h}}.

\Hypertarget{class_async_resource_loader_a241ba91f425aca1cb7ef29e1204e8ab8}\index{AsyncResourceLoader@{AsyncResourceLoader}!running@{running}}
\index{running@{running}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{running}{running}}
{\footnotesize\ttfamily \label{class_async_resource_loader_a241ba91f425aca1cb7ef29e1204e8ab8} 
std\+::atomic$<$bool$>$ Async\+Resource\+Loader\+::running \{ false \}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_async_resource_loader_8h_source_l00352}{352}} of file \mbox{\hyperlink{_async_resource_loader_8h_source}{Async\+Resource\+Loader.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00352\ \{\ \textcolor{keyword}{false}\ \};}

\end{DoxyCode}
\Hypertarget{class_async_resource_loader_af77d0f813bd3f2d3237a4f168748d22b}\index{AsyncResourceLoader@{AsyncResourceLoader}!totalCount@{totalCount}}
\index{totalCount@{totalCount}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{totalCount}{totalCount}}
{\footnotesize\ttfamily \label{class_async_resource_loader_af77d0f813bd3f2d3237a4f168748d22b} 
std\+::atomic$<$int$>$ Async\+Resource\+Loader\+::total\+Count \{ 0 \}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_async_resource_loader_8h_source_l00361}{361}} of file \mbox{\hyperlink{_async_resource_loader_8h_source}{Async\+Resource\+Loader.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00361\ \{\ 0\ \};}

\end{DoxyCode}
\Hypertarget{class_async_resource_loader_a6a3df46c4e1e3b50d93e648316c3a4a2}\index{AsyncResourceLoader@{AsyncResourceLoader}!workerThread@{workerThread}}
\index{workerThread@{workerThread}!AsyncResourceLoader@{AsyncResourceLoader}}
\doxysubsubsection{\texorpdfstring{workerThread}{workerThread}}
{\footnotesize\ttfamily \label{class_async_resource_loader_a6a3df46c4e1e3b50d93e648316c3a4a2} 
std\+::thread Async\+Resource\+Loader\+::worker\+Thread\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_async_resource_loader_8h_source_l00351}{351}} of file \mbox{\hyperlink{_async_resource_loader_8h_source}{Async\+Resource\+Loader.\+h}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Project/\+Jin\+Engine/\+Public/\mbox{\hyperlink{_async_resource_loader_8h}{Async\+Resource\+Loader.\+h}}\item 
Project/\+Jin\+Engine/\+Private/\mbox{\hyperlink{_async_resource_loader_8cpp}{Async\+Resource\+Loader.\+cpp}}\end{DoxyCompactItemize}
