\doxysection{Sound\+Manager Class Reference}
\hypertarget{class_sound_manager}{}\label{class_sound_manager}\index{SoundManager@{SoundManager}}


Manages sound asset registration and runtime playback instances using miniaudio.  




{\ttfamily \#include $<$Sound\+Manager.\+h$>$}

\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_sound_manager_1_1_sound_info}{Sound\+Info}}
\begin{DoxyCompactList}\small\item\em Registered sound metadata for tag-\/based playback. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct_sound_manager_1_1_sound_instance_m_a}{Sound\+Instance\+MA}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum class \mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81ed}{Sound\+Control\+Type}} \{ \mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81eda105b296a83f9c105355403f3332af50f}{Pause}}
, \mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81edaf1cefec9e2196c672a622347f1fbc325}{Resume}}
, \mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81eda11a755d598c0c417f9a36758c3da7481}{Stop}}
 \}
\begin{DoxyCompactList}\small\item\em Control command type used by Control\+By\+ID/\+Control\+By\+Tag/\+Control\+All. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_sound_manager_abcc1fbf3488be5788a42c9a4fe56df35}{Sound\+Manager}} ()
\begin{DoxyCompactList}\small\item\em Constructs an empty \doxylink{class_sound_manager}{Sound\+Manager} with no initialized audio engine. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_sound_manager_ad5dbf8eab22db48ff8f3db51b02f8938}{\texorpdfstring{$\sim$}{\string~}\+Sound\+Manager}} ()
\begin{DoxyCompactList}\small\item\em Destroys the \doxylink{class_sound_manager}{Sound\+Manager} and releases all audio resources. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_sound_manager_aac4b48cfc4d394c547f5efec7d451165}{Sound\+Manager}} (const \mbox{\hyperlink{class_sound_manager}{Sound\+Manager}} \&)=delete
\item 
\mbox{\hyperlink{class_sound_manager}{Sound\+Manager}} \& \mbox{\hyperlink{class_sound_manager_a5792dd09a6293846f738e7f9418d9085}{operator=}} (const \mbox{\hyperlink{class_sound_manager}{Sound\+Manager}} \&)=delete
\item 
void \mbox{\hyperlink{class_sound_manager_a8e52926369f4ff23599507c5e7cf7246}{Load\+Sound}} (const std\+::string \&tag, const std\+::string \&filepath, bool loop=false)
\begin{DoxyCompactList}\small\item\em Registers a sound asset under a tag. \end{DoxyCompactList}\item 
\mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}} \mbox{\hyperlink{class_sound_manager_acc7074efb4e8b5c71e85f556769d9b17}{Play}} (const std\+::string \&tag, float volume=1.\+0f, float start\+Time\+Sec=0.\+0f)
\begin{DoxyCompactList}\small\item\em Plays a new instance of a previously registered sound. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_sound_manager_a66c578e6c2850d673ea035870871e6ab}{Set\+Volume\+By\+ID}} (\mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}} id, float volume)
\begin{DoxyCompactList}\small\item\em Sets the volume of a specific playback instance by ID. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_sound_manager_a8581621afa759742160371f27c31e6fa}{Set\+Volume\+By\+Tag}} (const std\+::string \&tag, float volume)
\begin{DoxyCompactList}\small\item\em Sets the volume of all active instances associated with a tag. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_sound_manager_a4447c313bba2cdfbac3053a094f66776}{Set\+Volume\+All}} (float volume)
\begin{DoxyCompactList}\small\item\em Sets the volume of all active instances across all tags. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_sound_manager_a8d8a89dcb398e0e51b6853f5aa684280}{Control\+By\+ID}} (\mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81ed}{Sound\+Control\+Type}} control, \mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}} id)
\begin{DoxyCompactList}\small\item\em Applies a control command to a specific playback instance by ID. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_sound_manager_aaa6392113f543f2bb32e6811bd010100}{Control\+By\+Tag}} (\mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81ed}{Sound\+Control\+Type}} control, const std\+::string \&tag)
\begin{DoxyCompactList}\small\item\em Applies a control command to all active instances associated with a tag. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_sound_manager_ad78be412f57622826d4d7bf5f46378a8}{Control\+All}} (\mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81ed}{Sound\+Control\+Type}} control)
\begin{DoxyCompactList}\small\item\em Applies a control command to all active instances across all tags. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_sound_manager_af1ee5e29fca894a8ac9aeeb56b81f21d}{Init}} ()
\begin{DoxyCompactList}\small\item\em Creates and initializes the miniaudio engine. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_sound_manager_aaf241621221cdbefeba78e8b6bc29240}{Update}} ()
\begin{DoxyCompactList}\small\item\em Performs per-\/frame maintenance of sound instances. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_sound_manager_a4a77d91e2c8257d6c2d02ffffad671ff}{Cleanup}} ()
\begin{DoxyCompactList}\small\item\em Removes finished playback instances and recycles their IDs. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_sound_manager_af25662c1d0237540686087a080001f9b}{Free}} ()
\begin{DoxyCompactList}\small\item\em Stops all instances and destroys the miniaudio engine. \end{DoxyCompactList}\item 
\mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}} \mbox{\hyperlink{class_sound_manager_a1e76b08631c0a87462dab75fb0d526ed}{Generate\+ID}} ()
\begin{DoxyCompactList}\small\item\em Produces a new \doxylink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}, reusing IDs when available. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
friend \mbox{\hyperlink{class_sound_manager_a71aeb8bd4691d83f06f454cb6d52814c}{Jin\+Engine}}
\item 
ma\+\_\+engine \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{class_sound_manager_ac2e5b555ac4b752012ef3032184847f2}{engine}} = nullptr
\item 
std\+::unordered\+\_\+map$<$ std\+::string, \mbox{\hyperlink{struct_sound_manager_1_1_sound_info}{Sound\+Info}} $>$ \mbox{\hyperlink{class_sound_manager_a5446e9c6a2625292765b740ff0a90649}{sounds}}
\item 
std\+::unordered\+\_\+map$<$ std\+::string, std\+::vector$<$ \mbox{\hyperlink{struct_sound_manager_1_1_sound_instance_m_a}{Sound\+Instance\+MA}} \texorpdfstring{$\ast$}{*} $>$ $>$ \mbox{\hyperlink{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}{active\+Channels}}
\item 
std\+::unordered\+\_\+map$<$ \mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}}, \mbox{\hyperlink{struct_sound_manager_1_1_sound_instance_m_a}{Sound\+Instance\+MA}} \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef}{instance\+Map}}
\item 
std\+::queue$<$ \mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}} $>$ \mbox{\hyperlink{class_sound_manager_a2790a08c6ebba08bba3ad5539834ca6b}{reusable\+IDs}}
\item 
\mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}} \mbox{\hyperlink{class_sound_manager_a910b1fd3f58c344c1b2185b031d188d0}{next\+Instance\+ID}} = 1
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Manages sound asset registration and runtime playback instances using miniaudio. 

\doxylink{class_sound_manager}{Sound\+Manager} owns a miniaudio engine (ma\+\_\+engine) and provides a tag-\/based interface for\+:
\begin{DoxyItemize}
\item Registering sound assets (tag -\/\texorpdfstring{$>$}{>} filepath + loop setting).
\item Spawning playback instances (each Play call creates a new ma\+\_\+sound instance).
\item Controlling active instances (pause/resume/stop) by instance ID, by tag, or globally.
\item Cleaning up finished non-\/looping instances and recycling their IDs.
\end{DoxyItemize}

Each \doxylink{class_sound_manager_acc7074efb4e8b5c71e85f556769d9b17}{Play()} call loads the file and creates a dedicated playback instance. Active instances are tracked in two ways\+:
\begin{DoxyItemize}
\item instance\+Map\+: \doxylink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID} -\/\texorpdfstring{$>$}{>} instance pointer
\item active\+Channels\+: tag -\/\texorpdfstring{$>$}{>} list of active instance pointers
\end{DoxyItemize}

IDs are recycled using a queue (reusable\+IDs) to avoid unbounded growth of \doxylink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}.

The miniaudio engine is created and initialized in \doxylink{class_sound_manager_af1ee5e29fca894a8ac9aeeb56b81f21d}{Init()}, and destroyed in \doxylink{class_sound_manager_af25662c1d0237540686087a080001f9b}{Free()}. \doxylink{class_sound_manager_aaf241621221cdbefeba78e8b6bc29240}{Update()} performs maintenance by calling \doxylink{class_sound_manager_a4a77d91e2c8257d6c2d02ffffad671ff}{Cleanup()} to remove finished instances. 

Definition at line \mbox{\hyperlink{_sound_manager_8h_source_l00035}{35}} of file \mbox{\hyperlink{_sound_manager_8h_source}{Sound\+Manager.\+h}}.



\doxysubsection{Member Enumeration Documentation}
\Hypertarget{class_sound_manager_a3c4fde85dedc1019d025b016b60c81ed}\index{SoundManager@{SoundManager}!SoundControlType@{SoundControlType}}
\index{SoundControlType@{SoundControlType}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{SoundControlType}{SoundControlType}}
{\footnotesize\ttfamily \label{class_sound_manager_a3c4fde85dedc1019d025b016b60c81ed} 
enum class \mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81ed}{Sound\+Manager\+::\+Sound\+Control\+Type}}\hspace{0.3cm}{\ttfamily [strong]}}



Control command type used by Control\+By\+ID/\+Control\+By\+Tag/\+Control\+All. 


\begin{DoxyItemize}
\item Pause\+: stores playback cursor, stops the sound, and marks the instance as paused.
\item Resume\+: seeks to stored cursor and restarts if the instance is marked paused.
\item Stop\+: stops, uninitializes, destroys the instance, removes tracking entries, and recycles its ID. 
\end{DoxyItemize}\begin{DoxyEnumFields}[2]{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{Pause@{Pause}!SoundManager@{SoundManager}}\index{SoundManager@{SoundManager}!Pause@{Pause}}}\Hypertarget{class_sound_manager_a3c4fde85dedc1019d025b016b60c81eda105b296a83f9c105355403f3332af50f}\label{class_sound_manager_a3c4fde85dedc1019d025b016b60c81eda105b296a83f9c105355403f3332af50f} 
Pause&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Resume@{Resume}!SoundManager@{SoundManager}}\index{SoundManager@{SoundManager}!Resume@{Resume}}}\Hypertarget{class_sound_manager_a3c4fde85dedc1019d025b016b60c81edaf1cefec9e2196c672a622347f1fbc325}\label{class_sound_manager_a3c4fde85dedc1019d025b016b60c81edaf1cefec9e2196c672a622347f1fbc325} 
Resume&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Stop@{Stop}!SoundManager@{SoundManager}}\index{SoundManager@{SoundManager}!Stop@{Stop}}}\Hypertarget{class_sound_manager_a3c4fde85dedc1019d025b016b60c81eda11a755d598c0c417f9a36758c3da7481}\label{class_sound_manager_a3c4fde85dedc1019d025b016b60c81eda11a755d598c0c417f9a36758c3da7481} 
Stop&\\
\hline

\end{DoxyEnumFields}


Definition at line \mbox{\hyperlink{_sound_manager_8h_source_l00143}{143}} of file \mbox{\hyperlink{_sound_manager_8h_source}{Sound\+Manager.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00143\ \{\ Pause,\ Resume,\ Stop\ \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{class_sound_manager_abcc1fbf3488be5788a42c9a4fe56df35}\index{SoundManager@{SoundManager}!SoundManager@{SoundManager}}
\index{SoundManager@{SoundManager}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{SoundManager()}{SoundManager()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{class_sound_manager_abcc1fbf3488be5788a42c9a4fe56df35} 
Sound\+Manager\+::\+Sound\+Manager (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Constructs an empty \doxylink{class_sound_manager}{Sound\+Manager} with no initialized audio engine. 

The underlying miniaudio engine is created/initialized by \doxylink{class_sound_manager_af1ee5e29fca894a8ac9aeeb56b81f21d}{Init()}, which is expected to be called by \doxylink{class_jin_engine}{Jin\+Engine} during engine startup. 

Definition at line \mbox{\hyperlink{_sound_manager_8cpp_source_l00024}{24}} of file \mbox{\hyperlink{_sound_manager_8cpp_source}{Sound\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00025\ \ \ \ \ :\ \mbox{\hyperlink{class_sound_manager_ac2e5b555ac4b752012ef3032184847f2}{engine}}(\textcolor{keyword}{nullptr})}
\DoxyCodeLine{00026\ \ \ \ \ ,\ \mbox{\hyperlink{class_sound_manager_a910b1fd3f58c344c1b2185b031d188d0}{nextInstanceID}}(1) }
\DoxyCodeLine{00027\ \{}
\DoxyCodeLine{00028\ \}}

\end{DoxyCode}
\Hypertarget{class_sound_manager_ad5dbf8eab22db48ff8f3db51b02f8938}\index{SoundManager@{SoundManager}!````~SoundManager@{\texorpdfstring{$\sim$}{\string~}SoundManager}}
\index{````~SoundManager@{\texorpdfstring{$\sim$}{\string~}SoundManager}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}SoundManager()}{\string~SoundManager()}}
{\footnotesize\ttfamily \label{class_sound_manager_ad5dbf8eab22db48ff8f3db51b02f8938} 
Sound\+Manager\+::\texorpdfstring{$\sim$}{\string~}\+Sound\+Manager (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Destroys the \doxylink{class_sound_manager}{Sound\+Manager} and releases all audio resources. 

Calls \doxylink{class_sound_manager_af25662c1d0237540686087a080001f9b}{Free()} to stop and destroy all active instances and to uninitialize/destroy the underlying miniaudio engine. 

Definition at line \mbox{\hyperlink{_sound_manager_8cpp_source_l00030}{30}} of file \mbox{\hyperlink{_sound_manager_8cpp_source}{Sound\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00031\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{class_sound_manager_af25662c1d0237540686087a080001f9b}{Free}}();}
\DoxyCodeLine{00033\ \}}

\end{DoxyCode}
\Hypertarget{class_sound_manager_aac4b48cfc4d394c547f5efec7d451165}\index{SoundManager@{SoundManager}!SoundManager@{SoundManager}}
\index{SoundManager@{SoundManager}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{SoundManager()}{SoundManager()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{class_sound_manager_aac4b48cfc4d394c547f5efec7d451165} 
Sound\+Manager\+::\+Sound\+Manager (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_sound_manager}{Sound\+Manager}} \&}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



\doxysubsection{Member Function Documentation}
\Hypertarget{class_sound_manager_a4a77d91e2c8257d6c2d02ffffad671ff}\index{SoundManager@{SoundManager}!Cleanup@{Cleanup}}
\index{Cleanup@{Cleanup}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{Cleanup()}{Cleanup()}}
{\footnotesize\ttfamily \label{class_sound_manager_a4a77d91e2c8257d6c2d02ffffad671ff} 
void Sound\+Manager\+::\+Cleanup (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Removes finished playback instances and recycles their IDs. 

For each tracked instance\+:
\begin{DoxyItemize}
\item Looping instances are kept even if not currently playing.
\item Non-\/looping instances that reached the end are uninitialized, removed from active\+Channels, deleted, removed from instance\+Map, and their IDs are queued for reuse.
\end{DoxyItemize}

After the main pass, active\+Channels vectors are also pruned to remove nullptr entries and entries that correspond to finished non-\/looping sounds. 

Definition at line \mbox{\hyperlink{_sound_manager_8cpp_source_l00335}{335}} of file \mbox{\hyperlink{_sound_manager_8cpp_source}{Sound\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00336\ \{}
\DoxyCodeLine{00337\ \ \ \ \ std::vector<SoundInstanceID>\ finishedIDs;}
\DoxyCodeLine{00338\ \ \ \ \ finishedIDs.reserve(\mbox{\hyperlink{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef}{instanceMap}}.size());}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ [\textcolor{keywordtype}{id},\ inst]\ :\ \mbox{\hyperlink{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef}{instanceMap}})}
\DoxyCodeLine{00341\ \ \ \ \ \{}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inst\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \ \ \ \ finishedIDs.push\_back(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ ma\_bool32\ playing\ =\ ma\_sound\_is\_playing(\&inst-\/>sound);}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!playing)}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inst-\/>looping)}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00353\ }
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ma\_sound\_at\_end(\&inst-\/>sound))}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ma\_sound\_uninit(\&inst-\/>sound);}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ acIt\ =\ \mbox{\hyperlink{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}{activeChannels}}.find(inst-\/>tag);}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (acIt\ !=\ \mbox{\hyperlink{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}{activeChannels}}.end())}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ vec\ =\ acIt-\/>second;}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vec.erase(std::remove(vec.begin(),\ vec.end(),\ inst),\ vec.end());}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ inst;}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ finishedIDs.push\_back(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00369\ \ \ \ \ \}}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{SoundInstanceID}}\ \textcolor{keywordtype}{id}\ :\ finishedIDs)}
\DoxyCodeLine{00372\ \ \ \ \ \{}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef}{instanceMap}}.erase(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_sound_manager_a2790a08c6ebba08bba3ad5539834ca6b}{reusableIDs}}.push(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00375\ \ \ \ \ \}}
\DoxyCodeLine{00376\ }
\DoxyCodeLine{00377\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ [tag,\ vec]\ :\ \mbox{\hyperlink{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}{activeChannels}})}
\DoxyCodeLine{00378\ \ \ \ \ \{}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ vec.erase(}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ std::remove\_if(vec.begin(),\ vec.end(),}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [](\mbox{\hyperlink{struct_sound_manager_1_1_sound_instance_m_a}{SoundInstanceMA}}*\ inst)}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (inst\ ==\ nullptr)\ return\ true;}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (!inst-\/>looping\ \&\&\ !ma\_sound\_is\_playing(\&inst-\/>sound)\ \&\&\ ma\_sound\_at\_end(\&inst-\/>sound))}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return\ true;}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return\ false;}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}),}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \ \ \ \ vec.end());}
\DoxyCodeLine{00389\ \ \ \ \ \}}
\DoxyCodeLine{00390\ \}}

\end{DoxyCode}
\Hypertarget{class_sound_manager_ad78be412f57622826d4d7bf5f46378a8}\index{SoundManager@{SoundManager}!ControlAll@{ControlAll}}
\index{ControlAll@{ControlAll}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{ControlAll()}{ControlAll()}}
{\footnotesize\ttfamily \label{class_sound_manager_ad78be412f57622826d4d7bf5f46378a8} 
void Sound\+Manager\+::\+Control\+All (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81ed}{Sound\+Control\+Type}}}]{control}{}\end{DoxyParamCaption})}



Applies a control command to all active instances across all tags. 

This collects a snapshot list of tags from active\+Channels and calls \doxylink{class_sound_manager_aaa6392113f543f2bb32e6811bd010100}{Control\+By\+Tag()} for each tag, which avoids iterator invalidation while modifying active\+Channels.


\begin{DoxyParams}{Parameters}
{\em control} & Control command. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_sound_manager_8cpp_source_l00315}{315}} of file \mbox{\hyperlink{_sound_manager_8cpp_source}{Sound\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00316\ \{}
\DoxyCodeLine{00317\ \ \ \ \ std::vector<std::string>\ tags;}
\DoxyCodeLine{00318\ \ \ \ \ tags.reserve(\mbox{\hyperlink{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}{activeChannels}}.size());}
\DoxyCodeLine{00319\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ kv\ :\ \mbox{\hyperlink{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}{activeChannels}})}
\DoxyCodeLine{00320\ \ \ \ \ \{}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ tags.push\_back(kv.first);}
\DoxyCodeLine{00322\ \ \ \ \ \}}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ std::string\&\ t\ :\ tags)}
\DoxyCodeLine{00325\ \ \ \ \ \{}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_sound_manager_aaa6392113f543f2bb32e6811bd010100}{ControlByTag}}(control,\ t);}
\DoxyCodeLine{00327\ \ \ \ \ \}}
\DoxyCodeLine{00328\ \}}

\end{DoxyCode}
\Hypertarget{class_sound_manager_a8d8a89dcb398e0e51b6853f5aa684280}\index{SoundManager@{SoundManager}!ControlByID@{ControlByID}}
\index{ControlByID@{ControlByID}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{ControlByID()}{ControlByID()}}
{\footnotesize\ttfamily \label{class_sound_manager_a8d8a89dcb398e0e51b6853f5aa684280} 
void Sound\+Manager\+::\+Control\+By\+ID (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81ed}{Sound\+Control\+Type}}}]{control}{, }\item[{\mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}}}]{id}{}\end{DoxyParamCaption})}



Applies a control command to a specific playback instance by ID. 

Pause\+:
\begin{DoxyItemize}
\item Reads the cursor position in PCM frames and stores it.
\item Stops the sound and marks the instance paused.
\end{DoxyItemize}

Resume\+:
\begin{DoxyItemize}
\item If the instance is paused, seeks to the stored cursor and starts playback.
\end{DoxyItemize}

Stop\+:
\begin{DoxyItemize}
\item Stops and uninitializes the ma\+\_\+sound.
\item Removes the instance pointer from active\+Channels\mbox{[}inst-\/\texorpdfstring{$>$}{>}tag\mbox{]}.
\item Deletes the instance, erases it from instance\+Map, and recycles the ID.
\end{DoxyItemize}

If the ID does not exist, this function does nothing.


\begin{DoxyParams}{Parameters}
{\em control} & Control command. \\
\hline
{\em id} & Playback instance ID. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_sound_manager_8cpp_source_l00200}{200}} of file \mbox{\hyperlink{_sound_manager_8cpp_source}{Sound\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00201\ \{}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ \mbox{\hyperlink{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef}{instanceMap}}.find(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ ==\ \mbox{\hyperlink{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef}{instanceMap}}.end()\ ||\ it-\/>second\ ==\ \textcolor{keyword}{nullptr})\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ \ \ \mbox{\hyperlink{struct_sound_manager_1_1_sound_instance_m_a}{SoundInstanceMA}}*\ inst\ =\ it-\/>second;}
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00207\ \ \ \ \ \textcolor{keywordflow}{switch}\ (control)}
\DoxyCodeLine{00208\ \ \ \ \ \{}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81eda105b296a83f9c105355403f3332af50f}{SoundControlType::Pause}}:}
\DoxyCodeLine{00210\ \ \ \ \ \{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ ma\_uint64\ cursor\ =\ 0;}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ ma\_sound\_get\_cursor\_in\_pcm\_frames(\&inst-\/>sound,\ \&cursor);\ }
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ inst-\/>pausedCursor\ =\ cursor;}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ ma\_sound\_stop(\&inst-\/>sound);}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ inst-\/>paused\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00216\ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81edaf1cefec9e2196c672a622347f1fbc325}{SoundControlType::Resume}}:}
\DoxyCodeLine{00219\ \ \ \ \ \{}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inst-\/>paused)}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ ma\_sound\_seek\_to\_pcm\_frame(\&inst-\/>sound,\ inst-\/>pausedCursor);}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ ma\_sound\_start(\&inst-\/>sound);}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ inst-\/>paused\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00226\ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81eda11a755d598c0c417f9a36758c3da7481}{SoundControlType::Stop}}:}
\DoxyCodeLine{00229\ \ \ \ \ \{}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ ma\_sound\_stop(\&inst-\/>sound);}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ ma\_sound\_uninit(\&inst-\/>sound);}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ acIt\ =\ \mbox{\hyperlink{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}{activeChannels}}.find(inst-\/>tag);}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (acIt\ !=\ \mbox{\hyperlink{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}{activeChannels}}.end())}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ vec\ =\ acIt-\/>second;}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ vec.erase(std::remove(vec.begin(),\ vec.end(),\ inst),\ vec.end());}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ inst;}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef}{instanceMap}}.erase(it);}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_sound_manager_a2790a08c6ebba08bba3ad5539834ca6b}{reusableIDs}}.push(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00242\ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00243\ \ \ \ \ \}}
\DoxyCodeLine{00244\ \}}

\end{DoxyCode}
\Hypertarget{class_sound_manager_aaa6392113f543f2bb32e6811bd010100}\index{SoundManager@{SoundManager}!ControlByTag@{ControlByTag}}
\index{ControlByTag@{ControlByTag}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{ControlByTag()}{ControlByTag()}}
{\footnotesize\ttfamily \label{class_sound_manager_aaa6392113f543f2bb32e6811bd010100} 
void Sound\+Manager\+::\+Control\+By\+Tag (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81ed}{Sound\+Control\+Type}}}]{control}{, }\item[{const std\+::string \&}]{tag}{}\end{DoxyParamCaption})}



Applies a control command to all active instances associated with a tag. 

Pause/\+Resume\+:
\begin{DoxyItemize}
\item Iterates active\+Channels\mbox{[}tag\mbox{]} and pauses/resumes each instance using cursor tracking.
\end{DoxyItemize}

Stop\+:
\begin{DoxyItemize}
\item Stops and uninitializes each instance in active\+Channels\mbox{[}tag\mbox{]}, deletes them, removes corresponding entries from instance\+Map, recycles IDs, and clears the vector.
\end{DoxyItemize}

If the tag has no active instances, this function does nothing.


\begin{DoxyParams}{Parameters}
{\em control} & Control command. \\
\hline
{\em tag} & Sound tag whose active instances should be controlled. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_sound_manager_8cpp_source_l00247}{247}} of file \mbox{\hyperlink{_sound_manager_8cpp_source}{Sound\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00248\ \{}
\DoxyCodeLine{00249\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ \mbox{\hyperlink{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}{activeChannels}}.find(tag);}
\DoxyCodeLine{00250\ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ ==\ \mbox{\hyperlink{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}{activeChannels}}.end())}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keyword}{auto}\&\ vec\ =\ it-\/>second;}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{keywordflow}{if}\ (control\ ==\ \mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81eda105b296a83f9c105355403f3332af50f}{SoundControlType::Pause}})}
\DoxyCodeLine{00256\ \ \ \ \ \{}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}*\ inst\ :\ vec)}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!inst)\ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ ma\_uint64\ cursor\ =\ 0;}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ ma\_sound\_get\_cursor\_in\_pcm\_frames(\&inst-\/>sound,\ \&cursor);}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ inst-\/>pausedCursor\ =\ cursor;}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ ma\_sound\_stop(\&inst-\/>sound);}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ inst-\/>paused\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00267\ \ \ \ \ \}}
\DoxyCodeLine{00268\ \ \ \ \ \textcolor{keywordflow}{if}\ (control\ ==\ \mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81edaf1cefec9e2196c672a622347f1fbc325}{SoundControlType::Resume}})}
\DoxyCodeLine{00269\ \ \ \ \ \{}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}*\ inst\ :\ vec)}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!inst\ ||\ !inst-\/>paused)\ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ ma\_sound\_seek\_to\_pcm\_frame(\&inst-\/>sound,\ inst-\/>pausedCursor);}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ ma\_sound\_start(\&inst-\/>sound);}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ inst-\/>paused\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00278\ \ \ \ \ \}}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{keywordflow}{if}\ (control\ ==\ \mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81eda11a755d598c0c417f9a36758c3da7481}{SoundControlType::Stop}})}
\DoxyCodeLine{00281\ \ \ \ \ \{}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ std::vector<SoundInstanceID>\ toRecycle;}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ toRecycle.reserve(\mbox{\hyperlink{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef}{instanceMap}}.size());}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{struct_sound_manager_1_1_sound_instance_m_a}{SoundInstanceMA}}*\ inst\ :\ vec)}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inst\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ ma\_sound\_stop(\&inst-\/>sound);}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ ma\_sound\_uninit(\&inst-\/>sound);}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ [\textcolor{keywordtype}{id},\ uptr]\ :\ \mbox{\hyperlink{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef}{instanceMap}})}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (uptr\ ==\ inst)}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ toRecycle.push\_back(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ inst;}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{SoundInstanceID}}\ \textcolor{keywordtype}{id}\ :\ toRecycle)}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef}{instanceMap}}.erase(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_sound_manager_a2790a08c6ebba08bba3ad5539834ca6b}{reusableIDs}}.push(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ vec.clear();}
\DoxyCodeLine{00312\ \ \ \ \ \}}
\DoxyCodeLine{00313\ \}}

\end{DoxyCode}
\Hypertarget{class_sound_manager_af25662c1d0237540686087a080001f9b}\index{SoundManager@{SoundManager}!Free@{Free}}
\index{Free@{Free}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{Free()}{Free()}}
{\footnotesize\ttfamily \label{class_sound_manager_af25662c1d0237540686087a080001f9b} 
void Sound\+Manager\+::\+Free (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Stops all instances and destroys the miniaudio engine. 


\begin{DoxyItemize}
\item Uninitializes and deletes all \doxylink{struct_sound_manager_1_1_sound_instance_m_a}{Sound\+Instance\+MA} objects tracked by instance\+Map.
\item Clears instance\+Map, active\+Channels, and the registered sound table.
\item Clears the reusable ID queue and resets next\+Instance\+ID.
\item Uninitializes and deletes the ma\+\_\+engine instance. 
\end{DoxyItemize}

Definition at line \mbox{\hyperlink{_sound_manager_8cpp_source_l00053}{53}} of file \mbox{\hyperlink{_sound_manager_8cpp_source}{Sound\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00054\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ [\textcolor{keywordtype}{id},\ instPtr]\ :\ \mbox{\hyperlink{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef}{instanceMap}})}
\DoxyCodeLine{00056\ \ \ \ \ \{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (instPtr\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ ma\_sound\_uninit(\&instPtr-\/>sound);}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ instPtr;}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00062\ \ \ \ \ \}}
\DoxyCodeLine{00063\ \ \ \ \ \mbox{\hyperlink{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef}{instanceMap}}.clear();}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ [tag,\ vec]\ :\ \mbox{\hyperlink{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}{activeChannels}})}
\DoxyCodeLine{00066\ \ \ \ \ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ vec.clear();}
\DoxyCodeLine{00068\ \ \ \ \ \}}
\DoxyCodeLine{00069\ \ \ \ \ \mbox{\hyperlink{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}{activeChannels}}.clear();}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \mbox{\hyperlink{class_sound_manager_a5446e9c6a2625292765b740ff0a90649}{sounds}}.clear();}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordflow}{while}\ (!\mbox{\hyperlink{class_sound_manager_a2790a08c6ebba08bba3ad5539834ca6b}{reusableIDs}}.empty())}
\DoxyCodeLine{00074\ \ \ \ \ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_sound_manager_a2790a08c6ebba08bba3ad5539834ca6b}{reusableIDs}}.pop();}
\DoxyCodeLine{00076\ \ \ \ \ \}}
\DoxyCodeLine{00077\ \ \ \ \ \mbox{\hyperlink{class_sound_manager_a910b1fd3f58c344c1b2185b031d188d0}{nextInstanceID}}\ =\ 1;}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_sound_manager_ac2e5b555ac4b752012ef3032184847f2}{engine}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00080\ \ \ \ \ \{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ ma\_engine\_uninit(\mbox{\hyperlink{class_sound_manager_ac2e5b555ac4b752012ef3032184847f2}{engine}});}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ \mbox{\hyperlink{class_sound_manager_ac2e5b555ac4b752012ef3032184847f2}{engine}};}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_sound_manager_ac2e5b555ac4b752012ef3032184847f2}{engine}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00084\ \ \ \ \ \}}
\DoxyCodeLine{00085\ \}}

\end{DoxyCode}
\Hypertarget{class_sound_manager_a1e76b08631c0a87462dab75fb0d526ed}\index{SoundManager@{SoundManager}!GenerateID@{GenerateID}}
\index{GenerateID@{GenerateID}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{GenerateID()}{GenerateID()}}
{\footnotesize\ttfamily \label{class_sound_manager_a1e76b08631c0a87462dab75fb0d526ed} 
\mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}} Sound\+Manager\+::\+Generate\+ID (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Produces a new \doxylink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}, reusing IDs when available. 

If reusable\+IDs contains any previously freed IDs, one is popped and returned. Otherwise, next\+Instance\+ID is returned and incremented.

\begin{DoxyReturn}{Returns}
A non-\/zero \doxylink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_sound_manager_8cpp_source_l00092}{92}} of file \mbox{\hyperlink{_sound_manager_8cpp_source}{Sound\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00093\ \{}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_sound_manager_a2790a08c6ebba08bba3ad5539834ca6b}{reusableIDs}}.empty())}
\DoxyCodeLine{00095\ \ \ \ \ \{}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{SoundInstanceID}}\ \textcolor{keywordtype}{id}\ =\ \mbox{\hyperlink{class_sound_manager_a2790a08c6ebba08bba3ad5539834ca6b}{reusableIDs}}.front();}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_sound_manager_a2790a08c6ebba08bba3ad5539834ca6b}{reusableIDs}}.pop();}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ id;}
\DoxyCodeLine{00099\ \ \ \ \ \}}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_sound_manager_a910b1fd3f58c344c1b2185b031d188d0}{nextInstanceID}}++;}
\DoxyCodeLine{00101\ \}}

\end{DoxyCode}
\Hypertarget{class_sound_manager_af1ee5e29fca894a8ac9aeeb56b81f21d}\index{SoundManager@{SoundManager}!Init@{Init}}
\index{Init@{Init}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{Init()}{Init()}}
{\footnotesize\ttfamily \label{class_sound_manager_af1ee5e29fca894a8ac9aeeb56b81f21d} 
bool Sound\+Manager\+::\+Init (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Creates and initializes the miniaudio engine. 

Allocates ma\+\_\+engine if needed and calls ma\+\_\+engine\+\_\+init(). On failure, the engine is deleted and the pointer is reset to nullptr.

\begin{DoxyReturn}{Returns}
True on success; false on failure. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_sound_manager_8cpp_source_l00035}{35}} of file \mbox{\hyperlink{_sound_manager_8cpp_source}{Sound\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00036\ \{}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_sound_manager_ac2e5b555ac4b752012ef3032184847f2}{engine}}\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00038\ \ \ \ \ \{}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_sound_manager_ac2e5b555ac4b752012ef3032184847f2}{engine}}\ =\ \textcolor{keyword}{new}\ ma\_engine();}
\DoxyCodeLine{00040\ \ \ \ \ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ ma\_result\ res\ =\ ma\_engine\_init(\textcolor{keyword}{nullptr},\ \mbox{\hyperlink{class_sound_manager_ac2e5b555ac4b752012ef3032184847f2}{engine}});}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordflow}{if}\ (res\ !=\ MA\_SUCCESS)}
\DoxyCodeLine{00044\ \ \ \ \ \{}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ JIN\_ERR(\textcolor{stringliteral}{"{}miniaudio\ engine\ init\ failed:\ "{}}\ <<\ (\textcolor{keywordtype}{int})res);}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ \mbox{\hyperlink{class_sound_manager_ac2e5b555ac4b752012ef3032184847f2}{engine}};}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_sound_manager_ac2e5b555ac4b752012ef3032184847f2}{engine}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00049\ \ \ \ \ \}}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00051\ \}}

\end{DoxyCode}
\Hypertarget{class_sound_manager_a8e52926369f4ff23599507c5e7cf7246}\index{SoundManager@{SoundManager}!LoadSound@{LoadSound}}
\index{LoadSound@{LoadSound}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{LoadSound()}{LoadSound()}}
{\footnotesize\ttfamily \label{class_sound_manager_a8e52926369f4ff23599507c5e7cf7246} 
void Sound\+Manager\+::\+Load\+Sound (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{tag}{, }\item[{const std\+::string \&}]{filepath}{, }\item[{bool}]{loop}{ = {\ttfamily false}}\end{DoxyParamCaption})}



Registers a sound asset under a tag. 

This function records the filepath and default looping flag for the given tag. It does not load audio data immediately; loading occurs when \doxylink{class_sound_manager_acc7074efb4e8b5c71e85f556769d9b17}{Play()} is called. If the tag already exists, the entry is overwritten.


\begin{DoxyParams}{Parameters}
{\em tag} & Tag name used to reference the sound later. \\
\hline
{\em filepath} & Path to the audio file to be loaded by miniaudio. \\
\hline
{\em loop} & Default looping behavior applied to instances created via \doxylink{class_sound_manager_acc7074efb4e8b5c71e85f556769d9b17}{Play()}. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_sound_manager_8cpp_source_l00087}{87}} of file \mbox{\hyperlink{_sound_manager_8cpp_source}{Sound\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00088\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \mbox{\hyperlink{class_sound_manager_a5446e9c6a2625292765b740ff0a90649}{sounds}}[tag]\ =\ \mbox{\hyperlink{struct_sound_manager_1_1_sound_info}{SoundInfo}}\{\ filepath,\ loop\ \};}
\DoxyCodeLine{00090\ \}}

\end{DoxyCode}
\Hypertarget{class_sound_manager_a5792dd09a6293846f738e7f9418d9085}\index{SoundManager@{SoundManager}!operator=@{operator=}}
\index{operator=@{operator=}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \label{class_sound_manager_a5792dd09a6293846f738e7f9418d9085} 
\mbox{\hyperlink{class_sound_manager}{Sound\+Manager}} \& Sound\+Manager\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_sound_manager}{Sound\+Manager}} \&}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}

\Hypertarget{class_sound_manager_acc7074efb4e8b5c71e85f556769d9b17}\index{SoundManager@{SoundManager}!Play@{Play}}
\index{Play@{Play}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{Play()}{Play()}}
{\footnotesize\ttfamily \label{class_sound_manager_acc7074efb4e8b5c71e85f556769d9b17} 
\mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}} Sound\+Manager\+::\+Play (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{tag}{, }\item[{float}]{volume}{ = {\ttfamily 1.0f}, }\item[{float}]{start\+Time\+Sec}{ = {\ttfamily 0.0f}}\end{DoxyParamCaption})}



Plays a new instance of a previously registered sound. 

If the engine is not initialized or the tag is not registered, this returns 0.

A successful call\+:
\begin{DoxyItemize}
\item Creates a new \doxylink{struct_sound_manager_1_1_sound_instance_m_a}{Sound\+Instance\+MA}.
\item Initializes a ma\+\_\+sound from the file path recorded for the tag.
\item Applies volume and looping state.
\item Optionally seeks to start\+Time\+Sec (converted to PCM frame using the sound\textquotesingle{}s sample rate if available, otherwise the engine sample rate).
\item Starts playback and assigns a \doxylink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}.
\item Tracks the instance in instance\+Map and active\+Channels\mbox{[}tag\mbox{]}.
\end{DoxyItemize}

The returned ID can be used with \doxylink{class_sound_manager_a8d8a89dcb398e0e51b6853f5aa684280}{Control\+By\+ID()} / \doxylink{class_sound_manager_a66c578e6c2850d673ea035870871e6ab}{Set\+Volume\+By\+ID()}. IDs are recycled after instances are destroyed.


\begin{DoxyParams}{Parameters}
{\em tag} & Registered sound tag. \\
\hline
{\em volume} & Initial volume applied to this instance. \\
\hline
{\em start\+Time\+Sec} & Optional start offset in seconds. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Non-\/zero \doxylink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID} on success; 0 on failure. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_sound_manager_8cpp_source_l00116}{116}} of file \mbox{\hyperlink{_sound_manager_8cpp_source}{Sound\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00117\ \{}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_sound_manager_ac2e5b555ac4b752012ef3032184847f2}{engine}}\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ \mbox{\hyperlink{class_sound_manager_a5446e9c6a2625292765b740ff0a90649}{sounds}}.find(tag);}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ ==\ \mbox{\hyperlink{class_sound_manager_a5446e9c6a2625292765b740ff0a90649}{sounds}}.end())}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keyword}{const}\ std::string\&\ path\ =\ it-\/>second.filepath;}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ looping\ =\ it-\/>second.loop;}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \ \ \mbox{\hyperlink{struct_sound_manager_1_1_sound_instance_m_a}{SoundInstanceMA}}*\ inst\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{struct_sound_manager_1_1_sound_instance_m_a}{SoundInstanceMA}}();}
\DoxyCodeLine{00129\ \ \ \ \ inst-\/>tag\ =\ tag;}
\DoxyCodeLine{00130\ \ \ \ \ inst-\/>looping\ =\ looping;}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \ \ ma\_result\ res\ =\ ma\_sound\_init\_from\_file(\mbox{\hyperlink{class_sound_manager_ac2e5b555ac4b752012ef3032184847f2}{engine}},\ path.c\_str(),\ 0,\ \textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr},\ \&inst-\/>sound);}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordflow}{if}\ (res\ !=\ MA\_SUCCESS)}
\DoxyCodeLine{00134\ \ \ \ \ \{}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ JIN\_ERR(\textcolor{stringliteral}{"{}Failed\ to\ load\ sound:\ "{}}\ <<\ path);}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ inst;}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00138\ \ \ \ \ \}}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ ma\_sound\_set\_volume(\&inst-\/>sound,\ volume);}
\DoxyCodeLine{00141\ \ \ \ \ ma\_sound\_set\_looping(\&inst-\/>sound,\ looping\ ?\ MA\_TRUE\ :\ MA\_FALSE);}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordflow}{if}\ (startTimeSec\ >\ 0.0f)}
\DoxyCodeLine{00144\ \ \ \ \ \{}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ ma\_uint32\ sr\ =\ 0;}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{_sound_manager_8cpp_ac772bc1fd37c6da41f36dc2f1ee2874d}{MA\_GetSoundSampleRate}}(\&inst-\/>sound,\ sr))}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ sr\ =\ ma\_engine\_get\_sample\_rate(\mbox{\hyperlink{class_sound_manager_ac2e5b555ac4b752012ef3032184847f2}{engine}});}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ ma\_uint64\ frame\ =\ (ma\_uint64)(startTimeSec\ *\ (\textcolor{keywordtype}{double})sr);}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ ma\_sound\_seek\_to\_pcm\_frame(\&inst-\/>sound,\ frame);}
\DoxyCodeLine{00152\ \ \ \ \ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \ \ res\ =\ ma\_sound\_start(\&inst-\/>sound);}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keywordflow}{if}\ (res\ !=\ MA\_SUCCESS)}
\DoxyCodeLine{00156\ \ \ \ \ \{}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ ma\_sound\_uninit(\&inst-\/>sound);}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ inst;}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00160\ \ \ \ \ \}}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \ \ \mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{SoundInstanceID}}\ \textcolor{keywordtype}{id}\ =\ \mbox{\hyperlink{class_sound_manager_a1e76b08631c0a87462dab75fb0d526ed}{GenerateID}}();}
\DoxyCodeLine{00163\ \ \ \ \ \mbox{\hyperlink{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef}{instanceMap}}[id]\ =\ inst;}
\DoxyCodeLine{00164\ \ \ \ \ \mbox{\hyperlink{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}{activeChannels}}[tag].push\_back(inst);}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keywordflow}{return}\ id;}
\DoxyCodeLine{00166\ \}}

\end{DoxyCode}
\Hypertarget{class_sound_manager_a4447c313bba2cdfbac3053a094f66776}\index{SoundManager@{SoundManager}!SetVolumeAll@{SetVolumeAll}}
\index{SetVolumeAll@{SetVolumeAll}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{SetVolumeAll()}{SetVolumeAll()}}
{\footnotesize\ttfamily \label{class_sound_manager_a4447c313bba2cdfbac3053a094f66776} 
void Sound\+Manager\+::\+Set\+Volume\+All (\begin{DoxyParamCaption}\item[{float}]{volume}{}\end{DoxyParamCaption})}



Sets the volume of all active instances across all tags. 

Iterates all tags currently present in active\+Channels and applies \doxylink{class_sound_manager_a8581621afa759742160371f27c31e6fa}{Set\+Volume\+By\+Tag()}.


\begin{DoxyParams}{Parameters}
{\em volume} & New volume value to apply globally. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_sound_manager_8cpp_source_l00192}{192}} of file \mbox{\hyperlink{_sound_manager_8cpp_source}{Sound\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00193\ \{}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ [tag,\ \_]\ :\ \mbox{\hyperlink{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}{activeChannels}})}
\DoxyCodeLine{00195\ \ \ \ \ \{}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_sound_manager_a8581621afa759742160371f27c31e6fa}{SetVolumeByTag}}(tag,\ volume);}
\DoxyCodeLine{00197\ \ \ \ \ \}}
\DoxyCodeLine{00198\ \}}

\end{DoxyCode}
\Hypertarget{class_sound_manager_a66c578e6c2850d673ea035870871e6ab}\index{SoundManager@{SoundManager}!SetVolumeByID@{SetVolumeByID}}
\index{SetVolumeByID@{SetVolumeByID}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{SetVolumeByID()}{SetVolumeByID()}}
{\footnotesize\ttfamily \label{class_sound_manager_a66c578e6c2850d673ea035870871e6ab} 
void Sound\+Manager\+::\+Set\+Volume\+By\+ID (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}}}]{id}{, }\item[{float}]{volume}{}\end{DoxyParamCaption})}



Sets the volume of a specific playback instance by ID. 

If the ID is not found, this function does nothing.


\begin{DoxyParams}{Parameters}
{\em id} & Playback instance ID returned by \doxylink{class_sound_manager_acc7074efb4e8b5c71e85f556769d9b17}{Play()}. \\
\hline
{\em volume} & New volume value to apply. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_sound_manager_8cpp_source_l00168}{168}} of file \mbox{\hyperlink{_sound_manager_8cpp_source}{Sound\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00169\ \{}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ \mbox{\hyperlink{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef}{instanceMap}}.find(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ !=\ \mbox{\hyperlink{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef}{instanceMap}}.end()\ \&\&\ it-\/>second\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00172\ \ \ \ \ \{}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ ma\_sound\_set\_volume(\&it-\/>second-\/>sound,\ volume);}
\DoxyCodeLine{00174\ \ \ \ \ \}}
\DoxyCodeLine{00175\ \}}

\end{DoxyCode}
\Hypertarget{class_sound_manager_a8581621afa759742160371f27c31e6fa}\index{SoundManager@{SoundManager}!SetVolumeByTag@{SetVolumeByTag}}
\index{SetVolumeByTag@{SetVolumeByTag}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{SetVolumeByTag()}{SetVolumeByTag()}}
{\footnotesize\ttfamily \label{class_sound_manager_a8581621afa759742160371f27c31e6fa} 
void Sound\+Manager\+::\+Set\+Volume\+By\+Tag (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{tag}{, }\item[{float}]{volume}{}\end{DoxyParamCaption})}



Sets the volume of all active instances associated with a tag. 

Only instances currently tracked in active\+Channels\mbox{[}tag\mbox{]} are affected. If the tag has no active instances, this function does nothing.


\begin{DoxyParams}{Parameters}
{\em tag} & Sound tag whose active instances should be updated. \\
\hline
{\em volume} & New volume value to apply. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_sound_manager_8cpp_source_l00177}{177}} of file \mbox{\hyperlink{_sound_manager_8cpp_source}{Sound\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00178\ \{}
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ \mbox{\hyperlink{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}{activeChannels}}.find(tag);}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ ==\ \mbox{\hyperlink{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}{activeChannels}}.end())}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{struct_sound_manager_1_1_sound_instance_m_a}{SoundInstanceMA}}*\ inst\ :\ it-\/>second)}
\DoxyCodeLine{00184\ \ \ \ \ \{}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inst\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ ma\_sound\_set\_volume(\&inst-\/>sound,\ volume);}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00189\ \ \ \ \ \}}
\DoxyCodeLine{00190\ \}}

\end{DoxyCode}
\Hypertarget{class_sound_manager_aaf241621221cdbefeba78e8b6bc29240}\index{SoundManager@{SoundManager}!Update@{Update}}
\index{Update@{Update}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{Update()}{Update()}}
{\footnotesize\ttfamily \label{class_sound_manager_aaf241621221cdbefeba78e8b6bc29240} 
void Sound\+Manager\+::\+Update (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Performs per-\/frame maintenance of sound instances. 

Currently delegates to \doxylink{class_sound_manager_a4a77d91e2c8257d6c2d02ffffad671ff}{Cleanup()} to remove finished non-\/looping instances and to keep internal tracking containers consistent. 

Definition at line \mbox{\hyperlink{_sound_manager_8cpp_source_l00330}{330}} of file \mbox{\hyperlink{_sound_manager_8cpp_source}{Sound\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00331\ \{}
\DoxyCodeLine{00332\ \ \ \ \ \mbox{\hyperlink{class_sound_manager_a4a77d91e2c8257d6c2d02ffffad671ff}{Cleanup}}();}
\DoxyCodeLine{00333\ \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\Hypertarget{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39}\index{SoundManager@{SoundManager}!activeChannels@{activeChannels}}
\index{activeChannels@{activeChannels}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{activeChannels}{activeChannels}}
{\footnotesize\ttfamily \label{class_sound_manager_a75b7dcdccb8b231683bb0c21519f5c39} 
std\+::unordered\+\_\+map$<$std\+::string, std\+::vector$<$\mbox{\hyperlink{struct_sound_manager_1_1_sound_instance_m_a}{Sound\+Instance\+MA}}\texorpdfstring{$\ast$}{*}$>$ $>$ Sound\+Manager\+::active\+Channels\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_sound_manager_8h_source_l00268}{268}} of file \mbox{\hyperlink{_sound_manager_8h_source}{Sound\+Manager.\+h}}.

\Hypertarget{class_sound_manager_ac2e5b555ac4b752012ef3032184847f2}\index{SoundManager@{SoundManager}!engine@{engine}}
\index{engine@{engine}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{engine}{engine}}
{\footnotesize\ttfamily \label{class_sound_manager_ac2e5b555ac4b752012ef3032184847f2} 
ma\+\_\+engine\texorpdfstring{$\ast$}{*} Sound\+Manager\+::engine = nullptr\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_sound_manager_8h_source_l00255}{255}} of file \mbox{\hyperlink{_sound_manager_8h_source}{Sound\+Manager.\+h}}.

\Hypertarget{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef}\index{SoundManager@{SoundManager}!instanceMap@{instanceMap}}
\index{instanceMap@{instanceMap}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{instanceMap}{instanceMap}}
{\footnotesize\ttfamily \label{class_sound_manager_af2c6998eead9b15cac317be3c26a03ef} 
std\+::unordered\+\_\+map$<$\mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}}, \mbox{\hyperlink{struct_sound_manager_1_1_sound_instance_m_a}{Sound\+Instance\+MA}}\texorpdfstring{$\ast$}{*}$>$ Sound\+Manager\+::instance\+Map\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_sound_manager_8h_source_l00269}{269}} of file \mbox{\hyperlink{_sound_manager_8h_source}{Sound\+Manager.\+h}}.

\Hypertarget{class_sound_manager_a71aeb8bd4691d83f06f454cb6d52814c}\index{SoundManager@{SoundManager}!JinEngine@{JinEngine}}
\index{JinEngine@{JinEngine}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{JinEngine}{JinEngine}}
{\footnotesize\ttfamily \label{class_sound_manager_a71aeb8bd4691d83f06f454cb6d52814c} 
friend Sound\+Manager\+::\+Jin\+Engine\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_sound_manager_8h_source_l00037}{37}} of file \mbox{\hyperlink{_sound_manager_8h_source}{Sound\+Manager.\+h}}.

\Hypertarget{class_sound_manager_a910b1fd3f58c344c1b2185b031d188d0}\index{SoundManager@{SoundManager}!nextInstanceID@{nextInstanceID}}
\index{nextInstanceID@{nextInstanceID}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{nextInstanceID}{nextInstanceID}}
{\footnotesize\ttfamily \label{class_sound_manager_a910b1fd3f58c344c1b2185b031d188d0} 
\mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}} Sound\+Manager\+::next\+Instance\+ID = 1\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_sound_manager_8h_source_l00272}{272}} of file \mbox{\hyperlink{_sound_manager_8h_source}{Sound\+Manager.\+h}}.

\Hypertarget{class_sound_manager_a2790a08c6ebba08bba3ad5539834ca6b}\index{SoundManager@{SoundManager}!reusableIDs@{reusableIDs}}
\index{reusableIDs@{reusableIDs}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{reusableIDs}{reusableIDs}}
{\footnotesize\ttfamily \label{class_sound_manager_a2790a08c6ebba08bba3ad5539834ca6b} 
std\+::queue$<$\mbox{\hyperlink{_sound_manager_8h_a7675718ce8055fa8280410c0d32ad4f3}{Sound\+Instance\+ID}}$>$ Sound\+Manager\+::reusable\+IDs\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_sound_manager_8h_source_l00271}{271}} of file \mbox{\hyperlink{_sound_manager_8h_source}{Sound\+Manager.\+h}}.

\Hypertarget{class_sound_manager_a5446e9c6a2625292765b740ff0a90649}\index{SoundManager@{SoundManager}!sounds@{sounds}}
\index{sounds@{sounds}!SoundManager@{SoundManager}}
\doxysubsubsection{\texorpdfstring{sounds}{sounds}}
{\footnotesize\ttfamily \label{class_sound_manager_a5446e9c6a2625292765b740ff0a90649} 
std\+::unordered\+\_\+map$<$std\+::string, \mbox{\hyperlink{struct_sound_manager_1_1_sound_info}{Sound\+Info}}$>$ Sound\+Manager\+::sounds\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_sound_manager_8h_source_l00265}{265}} of file \mbox{\hyperlink{_sound_manager_8h_source}{Sound\+Manager.\+h}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Project/\+Jin\+Engine/\+Public/\mbox{\hyperlink{_sound_manager_8h}{Sound\+Manager.\+h}}\item 
Project/\+Jin\+Engine/\+Private/\mbox{\hyperlink{_sound_manager_8cpp}{Sound\+Manager.\+cpp}}\end{DoxyCompactItemize}
