\doxysection{State\+Manager Class Reference}
\hypertarget{class_state_manager}{}\label{class_state_manager}\index{StateManager@{StateManager}}


Manages the lifetime and transition of \doxylink{class_game_state}{Game\+State} instances.  




{\ttfamily \#include $<$State\+Manager.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_game_state}{Game\+State}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{class_state_manager_aeb24049cbe185fe0faec5c771e34c2bb}{Get\+Current\+State}} () const
\begin{DoxyCompactList}\small\item\em Returns the currently active \doxylink{class_game_state}{Game\+State}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_state_manager_a5337ecd1c035794817b1de05f961d352}{Change\+State}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{class_game_state}{Game\+State}} $>$ new\+State)
\begin{DoxyCompactList}\small\item\em Requests a transition to a new \doxylink{class_game_state}{Game\+State}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_state_manager_ab4ebd3189a4623e805d95f768b314acb}{Update}} (float dt, const \mbox{\hyperlink{struct_engine_context}{Engine\+Context}} \&engine\+Context)
\begin{DoxyCompactList}\small\item\em Updates the currently active \doxylink{class_game_state}{Game\+State}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_state_manager_ae161e57265af366c58b0e2b5d936553d}{Draw}} (const \mbox{\hyperlink{struct_engine_context}{Engine\+Context}} \&engine\+Context)
\begin{DoxyCompactList}\small\item\em Draws the currently active \doxylink{class_game_state}{Game\+State}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_state_manager_aa8e5c183bf725b7132f7e4bc800deaab}{Free}} (const \mbox{\hyperlink{struct_engine_context}{Engine\+Context}} \&engine\+Context)
\begin{DoxyCompactList}\small\item\em Frees the currently active \doxylink{class_game_state}{Game\+State}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
friend \mbox{\hyperlink{class_state_manager_aa3b875e78c4f22428efa559f000ba4b0}{Jin\+Engine}}
\item 
friend \mbox{\hyperlink{class_state_manager_a5bcbfbe259357f1cbc07f404fec9d18c}{Window\+Manager}}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{class_game_state}{Game\+State}} $>$ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{current\+State}}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{class_game_state}{Game\+State}} $>$ \mbox{\hyperlink{class_state_manager_a598a8e8b997a38333b28dbbe9c87cfe6}{next\+State}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Manages the lifetime and transition of \doxylink{class_game_state}{Game\+State} instances. 

\doxylink{class_state_manager}{State\+Manager} is responsible for owning the currently active \doxylink{class_game_state}{Game\+State} and safely transitioning to a new state when requested. State changes are not applied immediately; instead, the new state is stored temporarily and the actual transition occurs at a controlled point in the frame lifecycle.

This deferred transition model ensures that state changes do not occur in the middle of Update or Draw execution, preventing invalid access and partial state updates.

Update, Draw, and Free are driven exclusively by \doxylink{class_jin_engine}{Jin\+Engine} and are not intended to be called directly by user code. 

Definition at line \mbox{\hyperlink{_state_manager_8h_source_l00024}{24}} of file \mbox{\hyperlink{_state_manager_8h_source}{State\+Manager.\+h}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{class_state_manager_a5337ecd1c035794817b1de05f961d352}\index{StateManager@{StateManager}!ChangeState@{ChangeState}}
\index{ChangeState@{ChangeState}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{ChangeState()}{ChangeState()}}
{\footnotesize\ttfamily \label{class_state_manager_a5337ecd1c035794817b1de05f961d352} 
void State\+Manager\+::\+Change\+State (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{class_game_state}{Game\+State}} $>$}]{new\+State}{}\end{DoxyParamCaption})}



Requests a transition to a new \doxylink{class_game_state}{Game\+State}. 

The provided \doxylink{class_game_state}{Game\+State} is stored internally as the next state and will replace the current state at a safe synchronization point, typically between frames.

If a next state is already pending, it will be overwritten.


\begin{DoxyParams}{Parameters}
{\em new\+State} & Unique ownership of the new \doxylink{class_game_state}{Game\+State} to activate. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_state_manager_8cpp_source_l00008}{8}} of file \mbox{\hyperlink{_state_manager_8cpp_source}{State\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00009\ \{}
\DoxyCodeLine{00010\ \ \ \ \ \mbox{\hyperlink{class_state_manager_a598a8e8b997a38333b28dbbe9c87cfe6}{nextState}}\ =\ std::move(newState);}
\DoxyCodeLine{00011\ \}}

\end{DoxyCode}
\Hypertarget{class_state_manager_ae161e57265af366c58b0e2b5d936553d}\index{StateManager@{StateManager}!Draw@{Draw}}
\index{Draw@{Draw}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{Draw()}{Draw()}}
{\footnotesize\ttfamily \label{class_state_manager_ae161e57265af366c58b0e2b5d936553d} 
void State\+Manager\+::\+Draw (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_engine_context}{Engine\+Context}} \&}]{engine\+Context}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Draws the currently active \doxylink{class_game_state}{Game\+State}. 

Rendering is delegated to the active \doxylink{class_game_state}{Game\+State}. This function is expected to be called once per frame after \doxylink{class_state_manager_ab4ebd3189a4623e805d95f768b314acb}{Update()}.


\begin{DoxyParams}{Parameters}
{\em engine\+Context} & Engine-\/wide context. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_state_manager_8cpp_source_l00034}{34}} of file \mbox{\hyperlink{_state_manager_8cpp_source}{State\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00035\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00037\ \ \ \ \ \{}
\DoxyCodeLine{00038\ \ \ \ \ engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_a375da2d8afa977405cd3200f643b3e84}{BeginFrame}}(engineContext);}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>Draw(engineContext);}
\DoxyCodeLine{00041\ \ \ \ \ engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_a620231f7f4119dbf26ef416478578cde}{FlushDrawCommands}}(engineContext);}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordflow}{if}\ (engineContext.\mbox{\hyperlink{struct_engine_context_a9f2c2e2e2f267e5a86ecb50124cca61e}{engine}}-\/>\mbox{\hyperlink{class_jin_engine_a35998b207827eaccd30459251853c9da}{ShouldRenderDebugDraws}}())}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_a7c058729d4929a4295ebee1c6d324001}{FlushDebugLineDrawCommands}}(engineContext);}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_a61a2ee6952f8da0aee3ac21cd8033d0b}{EndFrame}}(engineContext);}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>PostProcessing(engineContext);}
\DoxyCodeLine{00048\ \ \ \ \ engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_a620231f7f4119dbf26ef416478578cde}{FlushDrawCommands}}(engineContext);}
\DoxyCodeLine{00049\ \ \ \ \ \}}
\DoxyCodeLine{00050\ \}}

\end{DoxyCode}
\Hypertarget{class_state_manager_aa8e5c183bf725b7132f7e4bc800deaab}\index{StateManager@{StateManager}!Free@{Free}}
\index{Free@{Free}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{Free()}{Free()}}
{\footnotesize\ttfamily \label{class_state_manager_aa8e5c183bf725b7132f7e4bc800deaab} 
void State\+Manager\+::\+Free (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_engine_context}{Engine\+Context}} \&}]{engine\+Context}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Frees the currently active \doxylink{class_game_state}{Game\+State}. 

This calls the state\textquotesingle{}s cleanup routines and releases ownership of the current state.


\begin{DoxyParams}{Parameters}
{\em engine\+Context} & Engine-\/wide context. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_state_manager_8cpp_source_l00052}{52}} of file \mbox{\hyperlink{_state_manager_8cpp_source}{State\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00053\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00055\ \ \ \ \ \{}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>SystemFree(engineContext);}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>SystemUnload(engineContext);}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}.reset();}
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ \}}

\end{DoxyCode}
\Hypertarget{class_state_manager_aeb24049cbe185fe0faec5c771e34c2bb}\index{StateManager@{StateManager}!GetCurrentState@{GetCurrentState}}
\index{GetCurrentState@{GetCurrentState}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{GetCurrentState()}{GetCurrentState()}}
{\footnotesize\ttfamily \label{class_state_manager_aeb24049cbe185fe0faec5c771e34c2bb} 
\mbox{\hyperlink{class_game_state}{Game\+State}} \texorpdfstring{$\ast$}{*} State\+Manager\+::\+Get\+Current\+State (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [nodiscard]}}



Returns the currently active \doxylink{class_game_state}{Game\+State}. 

The returned pointer is owned by \doxylink{class_state_manager}{State\+Manager} and remains valid until a state transition occurs.

\begin{DoxyReturn}{Returns}
Pointer to the active \doxylink{class_game_state}{Game\+State}, or nullptr if no state is active. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_state_manager_8cpp_source_l00003}{3}} of file \mbox{\hyperlink{_state_manager_8cpp_source}{State\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00004\ \{}
\DoxyCodeLine{00005\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}\ ?\ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}.get()\ :\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00006\ \}}

\end{DoxyCode}
\Hypertarget{class_state_manager_ab4ebd3189a4623e805d95f768b314acb}\index{StateManager@{StateManager}!Update@{Update}}
\index{Update@{Update}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{Update()}{Update()}}
{\footnotesize\ttfamily \label{class_state_manager_ab4ebd3189a4623e805d95f768b314acb} 
void State\+Manager\+::\+Update (\begin{DoxyParamCaption}\item[{float}]{dt}{, }\item[{const \mbox{\hyperlink{struct_engine_context}{Engine\+Context}} \&}]{engine\+Context}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Updates the currently active \doxylink{class_game_state}{Game\+State}. 

This function forwards the update call to the current \doxylink{class_game_state}{Game\+State} and also handles pending state transitions if a new state has been requested.


\begin{DoxyParams}{Parameters}
{\em dt} & Delta time in seconds. \\
\hline
{\em engine\+Context} & Engine-\/wide context. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_state_manager_8cpp_source_l00013}{13}} of file \mbox{\hyperlink{_state_manager_8cpp_source}{State\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00014\ \{}
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_state_manager_a598a8e8b997a38333b28dbbe9c87cfe6}{nextState}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00016\ \ \ \ \ \{}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>SystemFree(engineContext);}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>SystemUnload(engineContext);}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \ \ \ \ engineContext.\mbox{\hyperlink{struct_engine_context_aa5985216cfd74ab389769abc5a5fdfb6}{soundManager}}-\/>\mbox{\hyperlink{class_sound_manager_ad78be412f57622826d4d7bf5f46378a8}{ControlAll}}(\mbox{\hyperlink{class_sound_manager_a3c4fde85dedc1019d025b016b60c81eda11a755d598c0c417f9a36758c3da7481}{SoundManager::SoundControlType::Stop}});}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}\ =\ std::move(\mbox{\hyperlink{class_state_manager_a598a8e8b997a38333b28dbbe9c87cfe6}{nextState}});}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>SystemLoad(engineContext);}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>SystemInit(engineContext);}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>GetCameraManager().SetScreenSizeForAll(engineContext.\mbox{\hyperlink{struct_engine_context_ab6fa006055c2a224931059f7ed840bed}{windowManager}}-\/>\mbox{\hyperlink{class_window_manager_ad8e16ad88c8eb3e3889d5c3dbe7891cb}{GetWidth}}(),\ engineContext.\mbox{\hyperlink{struct_engine_context_ab6fa006055c2a224931059f7ed840bed}{windowManager}}-\/>\mbox{\hyperlink{class_window_manager_a50c9f12a67f69e822b4e70077773c9ca}{GetHeight}}());}
\DoxyCodeLine{00027\ \ \ \ \ \}}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00029\ \ \ \ \ \{}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>SystemUpdate(dt,\ engineContext);}
\DoxyCodeLine{00031\ \ \ \ \ \}}
\DoxyCodeLine{00032\ \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\Hypertarget{class_state_manager_a23b9db8ba856509ed476ed1144247b83}\index{StateManager@{StateManager}!currentState@{currentState}}
\index{currentState@{currentState}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{currentState}{currentState}}
{\footnotesize\ttfamily \label{class_state_manager_a23b9db8ba856509ed476ed1144247b83} 
std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{class_game_state}{Game\+State}}$>$ State\+Manager\+::current\+State\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_state_manager_8h_source_l00089}{89}} of file \mbox{\hyperlink{_state_manager_8h_source}{State\+Manager.\+h}}.

\Hypertarget{class_state_manager_aa3b875e78c4f22428efa559f000ba4b0}\index{StateManager@{StateManager}!JinEngine@{JinEngine}}
\index{JinEngine@{JinEngine}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{JinEngine}{JinEngine}}
{\footnotesize\ttfamily \label{class_state_manager_aa3b875e78c4f22428efa559f000ba4b0} 
friend State\+Manager\+::\+Jin\+Engine\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_state_manager_8h_source_l00026}{26}} of file \mbox{\hyperlink{_state_manager_8h_source}{State\+Manager.\+h}}.

\Hypertarget{class_state_manager_a598a8e8b997a38333b28dbbe9c87cfe6}\index{StateManager@{StateManager}!nextState@{nextState}}
\index{nextState@{nextState}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{nextState}{nextState}}
{\footnotesize\ttfamily \label{class_state_manager_a598a8e8b997a38333b28dbbe9c87cfe6} 
std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{class_game_state}{Game\+State}}$>$ State\+Manager\+::next\+State\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_state_manager_8h_source_l00090}{90}} of file \mbox{\hyperlink{_state_manager_8h_source}{State\+Manager.\+h}}.

\Hypertarget{class_state_manager_a5bcbfbe259357f1cbc07f404fec9d18c}\index{StateManager@{StateManager}!WindowManager@{WindowManager}}
\index{WindowManager@{WindowManager}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{WindowManager}{WindowManager}}
{\footnotesize\ttfamily \label{class_state_manager_a5bcbfbe259357f1cbc07f404fec9d18c} 
friend State\+Manager\+::\+Window\+Manager\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_state_manager_8h_source_l00027}{27}} of file \mbox{\hyperlink{_state_manager_8h_source}{State\+Manager.\+h}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Project/\+Jin\+Engine/\+Public/\mbox{\hyperlink{_state_manager_8h}{State\+Manager.\+h}}\item 
Project/\+Jin\+Engine/\+Private/\mbox{\hyperlink{_state_manager_8cpp}{State\+Manager.\+cpp}}\end{DoxyCompactItemize}
